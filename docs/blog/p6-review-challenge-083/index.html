<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Andrew Shitov Weekly Review: Challenge - #083.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Andrew Shitov Weekly Review: Challenge - 083</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Andrew Shitov Weekly Review: Challenge - 083</h2>
                    <div class="portfolio-meta">
                        <span>Sunday, Nov 8, 2020</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/p6-review-challenge-083.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="getting-in-touch">Getting in Touch</h2>
<p><a href="mailto:andy@shitov.ru"><img src="/images/blog/Email.svg" height="50" width="50"> Email</a> › Email me (Andrew) with any feedback about this review.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="/images/blog/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>
<p><a href="https://twitter.com/perlwchallenge"><img src="/images/blog/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>
<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>
<hr>
<p>Welcome to the <strong>Raku Review</strong> for <strong>Week 083</strong> of <strong>The Weekly Challenge!</strong>. For a quick overview, go through the <a href="/blog/perl-weekly-challenge-083/"><strong>original tasks</strong></a> and <a href="/blog/recap-challenge-083/"><strong>recap</strong></a> of the weekly challenge.</p>
<hr>
<h2 id="task-1-words-length">Task 1. Words Length</h2>
<p>The first task this week is quite simple. And as always in such cases, more people submitted their solutions :-) The task is to find the total number of characters in the phrase excluding its first and the last words. Not quite clear if we should also ignore punctuation, but that’s a separate question.</p>
<p>In Raku, we can use the <code>words</code> method that splits the phrase into words, after which take a slice to extract the elements with indices from <code>1</code> to <code>*-2</code>. After that point, different approaches are possible: either get the lengths of all the words and add them up or join the words and then take the total length in one go.</p>
<p>The first branch gives solutions similar <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/ash/raku/ch-1.raku">to this one</a>:</p>
<pre><code>$s.words[1 .. *-2]&gt;&gt;.chars.sum.say;
</code></pre>
<p>The second approach leads <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/mark-anderson/raku/ch-1.p6">to the following code</a>:</p>
<pre><code>$S.words[1..*-2].join.chars;
</code></pre>
<p>Alternatively, you can <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/colin-crain/raku/ch-1.raku">remove those non-wanted words and spaces</a> using a regex, and then take the lengths of what’s left:</p>
<pre><code>$_ = $str;
s:g/^ \s* \S+ | \S+ \s* $ | \s+//;
say $_.chars;
</code></pre>
<p>Or you can <code>map</code> the words and exploit side effects of executing a code block. This example is a good start to study the facilities for parallel computing that Raku offers. Think about how to add <a href="https://docs.raku.org/routine/race"><code>race</code></a> and <a href="https://docs.raku.org/type/atomicint">atomic</a> operations to <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/ulrich-rieke/raku/ch-1.raku">this program</a>:</p>
<pre><code>my $stringlen = 0 ;
@words[1..$arraylen - 2].map( {$stringlen += $_.chars } ) ;
say $stringlen ;
</code></pre>
<p>An <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/gugod/raku/ch-1.raku">alternative approach</a> is to find the positions of all spaces and use a simple formula to find the length of the words we need:</p>
<pre><code>sub words-length (Str $s) {
    my @w = $s.trim.indices(' ');
    return @w.elems == 0 ?? 0 !! @w.tail - @w.head - @w.elems + 1;
}
</code></pre>
<h3 id="video-review">Video review</h3>
<p>The full review of Task 1 is available on YouTube:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/gnE9DAluVIE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The timestamps for quick access to the review of each solution.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=59s">00:59</a> - Andrew Shitov</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=136s">02:16</a> - Arne Sommer</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=192s">03:12</a> - Jan Krnavek</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=278s">04:38</a> - Kang-min Liu</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=445s">07:25</a> - Mark Anderson</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=479s">07:59</a> - Markus Holzer</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=506s">08:26</a> - PJ Durai</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=562s">09:22</a> - Simon Proctor</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=644s">10:44</a> - Stuart Little</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=685s">11:25</a> - Athanasius</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=771s">12:51</a> - Colin Crain</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=844s">14:04</a> - Daniel Mita</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=1029s">17:09</a> - Jaldhar H. Vyas</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=1153s">19:13</a> - Julio de Castro</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=1213s">20:13</a> - Laurent Rosenfeld</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=1244s">20:44</a> - Myoungjin Jeon</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=1374s">22:54</a> - Roger Bell_West</li>
<li><a href="https://www.youtube.com/watch?v=gnE9DAluVIE&amp;t=1431s">23:51</a> - Ulrich Rieke</li>
</ul>
<h2 id="task-2-flip-array">Task 2. Flip Array</h2>
<p>In the second task, you had to take an array of positive integers. For some of them, you can alter the sign. In the end, add the numbers up to get the minimum possible but non-negative sum. The solution with the minimum sum and the minimum number of sign flips wins.</p>
<p>On a bigger scale, we can split the solutions into three groups. In the first, we simply try to find all possible combinations of <code>+</code> and <code>-</code>. In the second, we split the numbers into two groups, one of which comes with <code>+</code>, while another with <code>-</code>.</p>
<p>The first type of solution is easily implemented with the help of binary representation of the numbers from 0 to <i>2<sup>n</sup> - 1</i>, where <i>n</i> is the size of input data. Zero bits can represent a <code>+</code>, and set bits would stand for <code>-</code>. Having the bits in an array, you can use Raku’s <code>Z</code> operator <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/ash/raku/ch-2.raku#L24">to multiply data items</a>:</p>
<pre><code>my $sum = [+] @bits&gt;&gt;.subst(0, -1) Z* @a;
</code></pre>
<p>Splitting the items into two groups <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/colin-crain/raku/ch-2.raku#L52">can be done</a> with testing all <code>combinations</code>:</p>
<pre><code>for @arr.combinations($k) -&gt; $c {
    my $new_sum = $base_sum - 2 * $c.sum;
    if 0 &lt;= $new_sum &lt; $min {
        $min = $new_sum;
        $pick = $c;
    }
}
</code></pre>
<p>Note that in this fragment, the minus sign is indirectly applied by subtracting the values twice.</p>
<p>There’s also a completely different approach with recursion. <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/arne-sommer/raku/ch-2.p6#L29">Here is the idea</a>:</p>
<pre><code>sub do_it (@left, @right is copy) {
    my $current = @right.shift;

    # . . .

    do_it((@left,  $current).flat, @right);
    do_it((@left, -$current).flat, @right);
}
</code></pre>
<p>As you see, on each step, two branches are tested: in one, the next item is added with a <code>+</code>, while in the other with <code>-</code>.</p>
<p>From the other interesting solutions, let me highlight the usage of Raku’s built-ins. [Using <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/markus-holzer/raku/ch-2.raku"><code>classify</code> routine</a>:</p>
<pre><code>my &amp;less-than-zero = *.grep: * &lt; 0;

say +less-than-zero               # find and count all negative numbers of
    ( [X] map { +$_, -$_ }, @A )  # all possible candidates
        .classify( *.sum )        # grouped by sum
        .grep( *.key &gt; -1 )       # filtered where sum is positive
        .sort( *.key )            # sorted by sum
        .head.value               # closest to zero
        .min( &amp;less-than-zero )   # the one with the least flips
</code></pre>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-083/stuart-little/raku/ch-2.p6">And with the <code>reduce</code> function</a>:</p>
<pre><code>sub cmpair($cap) {
    return -&gt; @a, @b {
    (@b.sum &lt;= $cap) ?? max(@a,(@b.sum,-@b.elems)) !! @a;
    }
}

say -reduce(cmpair(@*ARGS.sum/2), (0,0), |@*ARGS.combinations).[1];
</code></pre>
<p>Explore the rest of the code in the below video review!</p>
<h3 id="video-review-1">Video review</h3>
<p>The full review of Task 2 is available on YouTube:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/C5GDIKHbImo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The timestamps to the reviews of the individual solutions:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=69s">01:09</a> - Andrew Shitov</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=259s">04:19</a> - Arne Sommer</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=595s">09:55</a> - Jan Krnavek</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=720s">12:00</a> - Kang-min Liu</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=902s">15:02</a> - Mark Anderson</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=1038s">17:18</a> - Markus Holzer</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=1198s">19:58</a> - PJ Durai</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=1315s">21:55</a> - Simon Proctor</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=1596s">26:36</a> - Stuart Little</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=1752s">29:12</a> - Athanasius</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=1946s">32:26</a> - Colin Crain</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=2072s">34:32</a> - Daniel Mita</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=2158s">35:58</a> - Jaldhar H. Vyas</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=2361s">39:21</a> - Julio de Castro</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=2602s">43:22</a> - Laurent Rosenfeld</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=2845s">47:25</a> - Myoungjin Jeon</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=3044s">50:44</a> - Roger Bell_West</li>
<li><a href="https://www.youtube.com/watch?v=C5GDIKHbImo&amp;t=3105s">51:45</a> - Ulrich Rieke</li>
</ul>
<br>
<p>If you want to participate in <strong>The Weekly Challenge</strong>, please contact us at <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2020
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" rel="noreferrer" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

