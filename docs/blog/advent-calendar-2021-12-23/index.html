<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://theweeklychallenge.org/"/>
    <meta property="og:image"       content="https://theweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://theweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Advent Calendar - December 23, 2021.">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Advent Calendar - December 23, 2021</title>
    <link rel="icon" href="https://theweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://theweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://theweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
            position: fixed;        
            bottom: 20px;           
            right: 30px;            
            z-index: 99;            
            border: none;           
            outline: none;          
            background-color: red;  
            color: white;           
            cursor: pointer;        
            padding: 15px;          
            border-radius: 10px;    
            font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 40 || document.documentElement.scrollTop > 40) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://theweeklychallenge.org/">
                        <img src="https://theweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://theweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Advent Calendar - December 23, 2021</h2>
                    <div class="portfolio-meta">
                        <span>Thursday, Dec 23, 2021</span>|
                        <span> Tags:
                            Perl, Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://theweeklychallenge.org/images/blog/2021-12-23.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <h2 id="advent-calendar-2021blogadvent-calendar-2021"><a href="/blog/advent-calendar-2021"><strong>Advent Calendar 2021</strong></a></h2>
<h3 id="-day-22blogadvent-calendar-2021-12-22--day-23--day-24blogadvent-calendar-2021-12-24-">| <a href="/blog/advent-calendar-2021-12-22"><strong>Day 22</strong></a> | <strong>Day 23</strong> | <a href="/blog/advent-calendar-2021-12-24"><strong>Day 24</strong></a> |</h3>
<hr>
<p>The gift is presented by <a href="/blog/meet-the-champion-038"><strong>Ryan Thompson</strong></a>. Today he is talking about his solution to <a href="/blog/perl-weekly-challenge-110"><strong>&ldquo;The Weekly Challenge - 110&rdquo;</strong></a>. This is re-produced for <strong>Advent Calendar 2021</strong> from the original <a href="https://ry.ca/2021/04/transpose-csv-file/"><strong>post</strong></a> by <code>Ryan Thompson</code>.</p>
<hr>
<br>
<h2 id="task-2-transpose-csv-file">Task #2: Transpose CSV File</h2>
<br>
<p>You are given a text file.</p>
<p>Write a script to transpose the contents of the given file.</p>
<br>
<h3 id="input-file">Input File</h3>
<br>
<pre><code>name,age,sex
Mohammad,45,m
Joe,20,m
Julie,35,f
Cristina,10,f
</code></pre>
<br>
<h3 id="output">Output</h3>
<br>
<pre><code>name,Mohammad,Joe,Julie,Cristina
age,45,20,35,10
sex,m,m,f,f
</code></pre>
<br>
<hr>
<br>
<p>The second task this week is simple: given a (simplified) comma-separated-value (CSV) file, transpose its rows and columns. For example:</p>
<br>
<p><img src="/images/blog/2021-12-23-ex1.png" alt="Example"></p>
<br>
<p>The challenge task does not actually refer to the input as CSV, so I’m using that term loosely, with simplified parsing to match the input specification. If more compliant parsing is needed, one could use the usual <a href="https://metacpan.org/pod/Text::CSV"><strong>Text::CSV</strong></a> module in <code>Perl</code>, or <a href="https://github.com/Tux/CSV"><strong>ports in Raku</strong></a>.</p>
<p>There are a couple of ways to transpose files, which I’ll explore in <code>Raku</code> and <code>Perl</code>.)</p>
<br>
<h2 id="perl">Perl</h2>
<br>
<p>Since we’re only asked to output the result, we don’t need to store it. Solutions which work in-place or on a copy of an input array could be made to work, but we don’t need the added effort in this case.</p>
<p>The general algorithm for printing an array transposition is to loop with $col from 0 to the width of the original array, and then print the $col-th element of every row.</p>
<br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># Read input into an array of arrays</span>
<span style="color:#66d9ef">my</span> @rows <span style="color:#f92672">=</span> map { chomp; [ split <span style="color:#e6db74">&#39;,&#39;</span> ] } <span style="color:#f92672">&lt;&gt;</span>;

<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $col (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#{$rows[<span style="color:#ae81ff">0</span>]}) {
    say join <span style="color:#e6db74">&#39;,&#39;</span>, map { $_<span style="color:#f92672">-&gt;</span>[$col] } @rows
}
</code></pre></div><br>
<p>This runs in <code>O(m×n)</code> time, and uses <code>O(m×n)</code> total memory (importing the original array into <code>@rows</code>), which is the best we can do.</p>
<p>There is also the <a href="https://metacpan.org/pod/List::MoreUtils#zip6"><strong>zip6</strong></a> function from <a href="https://metacpan.org/pod/List::MoreUtils"><strong>List::MoreUtils</strong></a>, but it only works on <code>arrays</code>, not <code>array refs</code>, so it would not be immediately helpful here.</p>
<br>
<h2 id="raku">Raku</h2>
<br>
<p><code>Raku</code> gives us a built-in <a href="https://docs.raku.org/routine/zip"><strong>zip</strong></a> operator ([Z]), which does just what we need.</p>
<br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>( Str $file ) {
    ([Z] $file<span style="color:#f92672">.</span>IO<span style="color:#f92672">.</span>lines<span style="color:#f92672">.</span>map(<span style="color:#f92672">*.</span>split(<span style="color:#e6db74">&#39;,&#39;</span>)))<span style="color:#f92672">.</span>map(<span style="color:#f92672">*.</span>join(<span style="color:#e6db74">&#39;,&#39;</span>))<span style="color:#960050;background-color:#1e0010">»</span><span style="color:#f92672">.</span>say;
}
</code></pre></div><br>
<p>Here, we <code>split()</code> each input line on commas, and then <code>[Z] (zip)</code> that result, and our file is already transposed. We simply need to <code>join()</code> each of the resulting rows back up with commas, and output each string with <code>say()</code>.</p>
<p>Both <code>Perl</code> and <code>Raku</code> solutions give the same result on the example input:</p>
<br>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">[pwc<span style="color:#e6db74">/rjt_110] challenge-110/</span><span style="color:#960050;background-color:#1e0010">⋯</span><span style="color:#e6db74">/raku %&gt; cat ../</span>perl<span style="color:#f92672">/</span>ch<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span>csv
name,age,sex
Mohammad,<span style="color:#ae81ff">45</span>,m
Joe,<span style="color:#ae81ff">20</span>,m
Julie,<span style="color:#ae81ff">35</span>,f
Cristina,<span style="color:#ae81ff">10</span>,f

[pwc<span style="color:#e6db74">/rjt_110] challenge-110/</span><span style="color:#960050;background-color:#1e0010">⋯</span><span style="color:#e6db74">/raku %&gt; ./c</span>h<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span>raku <span style="color:#f92672">..</span><span style="color:#e6db74">/perl/c</span>h<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">.</span>csv
name,Mohammad,Joe,Julie,Cristina
age,<span style="color:#ae81ff">45</span>,<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">35</span>,<span style="color:#ae81ff">10</span>
sex,m,m,f,f
</code></pre></div><hr>
<br>
<h2 id="full-code">Full Code</h2>
<br>
<p>The full code for this week’s solutions is <a href="https://github.com/rjt-pl/perlweeklychallenge-club/tree/rjt_110/challenge-110/ryan-thompson"><strong>available on GitHub</strong></a>.</p>
<hr>
<p>If you have any suggestion then please do share with us <a href="mailto:perlweeklychallenge@yahoo.com">perlweeklychallenge@yahoo.com</a>.</p>
<p><a href="/blog/advent-calendar-2021"><strong>Advent Calendar 2021</strong></a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2019 - 2021
                    </span> The Weekly Challenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" rel="noreferrer" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://theweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://theweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://theweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://theweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://theweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://theweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://theweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://theweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://theweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://theweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

