<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Blog for the weekly challenge #062.">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>BLOG: The Weekly Challenge #062</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>BLOG: The Weekly Challenge #062</h2>
                    <div class="portfolio-meta">
                        <span>Saturday, May 30, 2020</span>|
                        <span> Tags:
                            Perl, Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/weekly-challenge-062.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <h1 id="headline">HEADLINE</h1>
<hr>
<p>Once again, <strong>Neil Bowers</strong>, came up with another exciting task for all <strong>Team PWC</strong> members. Like always, it was fun task. Thanks to <strong>Ryan</strong> for providng sample data and expected result based on the definition of the task. Half the job done already. The only thing left for the us, is get on with the job. I noticed <strong>Raku</strong> needed slightly different approach then the <strong>Perl</strong>. It could be I am doing something very badly. I am happy to correct myself, if you find anything silly. More on this, later down below.</p>
<p>However the second task of the week, <strong>N Queens</strong>, turned out to tough nut to crack for me. For the first, since I started contributing, I gave up on this. Technically speaking, I did attempt to solve it with the help of my <strong>11 year old</strong> daughter, but it was only limited to <strong>2D</strong> rather than <strong>3D</strong> as expected in the task. Therefore I decided not to submit my solution. Having said that I didn&rsquo;t want to loose my work, so just for record, I am sharing in this blog, just in case, if I want to re-visit the code.</p>
<p>Let me share my solutions to the <strong><a href="/perl-weekly-challenge-062">Perl Weekly Challenge - 062</a></strong>.</p>
<hr>
<br>
<h2 id="task-1--sort-email-addresses">TASK #1 › Sort Email Addresses</h2>
<h4 id="submitted-by-neil-bowershttpneilborg">Submitted by <strong><a href="http://neilb.org">Neil Bowers</a></strong></h4>
<h4 id="reviewed-by-ryan-thompsonhttpsryca">Reviewed by <strong><a href="https://ry.ca">Ryan Thompson</a></strong></h4>
<br>
<p>Write a script that takes a list of email addresses (one per line) and sorts them first by the domain part of the email address, and then by the part to the left of the @ (known as the mailbox).</p>
<p>Add a -u option which only includes unique email addresses in the output, just like sort -u.</p>
<hr>
<br>
<p>As per the tradition, first I defined helper <strong>sub sort_data()</strong> to deal the core work. The trick lies in how the data is captured. For regular sort, I used <strong>array</strong> whereas for unique sort I used <strong>hash</strong> as described below. The subroutine also dealing with parameter validation, that makes it <strong>one-stop</strong> solution.</p>
<p>The best line in the subroutine is below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> (reverse sort { lc $a<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">cmp</span> lc $b<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">||</span> lc $a<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">cmp</span> $b<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] } @source) {
</code></pre></div><p>This is something, that I learnt here at <strong>Perl Weekly Challenge</strong>.</p>
<p>Please find below the complete definition of <strong>sub sort_data()</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">sort_data</span> {
    <span style="color:#66d9ef">my</span> ($file, $flag) <span style="color:#f92672">=</span> @_;

    die <span style="color:#e6db74">&#34;ERROR: Missing data file.\n&#34;</span>
        <span style="color:#66d9ef">unless</span> defined $file;

    die <span style="color:#e6db74">&#34;ERROR: Invalid flag [$flag].\n&#34;</span>
        <span style="color:#66d9ef">if</span> (defined $flag <span style="color:#f92672">&amp;&amp;</span> $flag <span style="color:#f92672">!~</span> <span style="color:#e6db74">/^\-u$/</span>);

    open (<span style="color:#66d9ef">my</span> $F, <span style="color:#e6db74">&#34;&lt;:encoding(utf8)&#34;</span>, $file)
        <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;ERROR: Can&#39;t open $file: $!\n&#34;</span>;

    <span style="color:#66d9ef">my</span> @source <span style="color:#f92672">=</span> ();
    <span style="color:#66d9ef">my</span> $source <span style="color:#f92672">=</span> ();
    <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">my</span> $row <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;$F&gt;</span>) {
        chomp $row;
        <span style="color:#66d9ef">my</span> ($mailbox, $domain) <span style="color:#f92672">=</span> split <span style="color:#e6db74">/\@/</span>, $row, <span style="color:#ae81ff">2</span>;
        push @source, [$mailbox, $domain];
        <span style="color:#66d9ef">if</span> ($flag) {
            $source<span style="color:#f92672">-&gt;</span>{$mailbox} <span style="color:#f92672">=</span> $domain;
        }
    }

    close($F);

    <span style="color:#66d9ef">my</span> $sorted <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;
    <span style="color:#66d9ef">if</span> ($flag) {
        <span style="color:#66d9ef">foreach</span> (sort { lc $source<span style="color:#f92672">-&gt;</span>{$a} <span style="color:#f92672">cmp</span> lc $source<span style="color:#f92672">-&gt;</span>{$b} } sort keys %$source) {
            push @$sorted, join <span style="color:#e6db74">&#34;@&#34;</span>, $_, $source<span style="color:#f92672">-&gt;</span>{$_};
        }
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">foreach</span> (reverse sort { lc $a<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">cmp</span> lc $b<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">||</span> $a<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">cmp</span> $b<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">1</span>] } @source) {
            push @$sorted, join <span style="color:#e6db74">&#34;@&#34;</span>, @$_;
        }
    }

    <span style="color:#66d9ef">return</span> $sorted;
}
</code></pre></div><p>Thanks to the task, I got to try <strong>File</strong> operation in <strong>Raku</strong>. Like always, I fall in love with <strong>Raku</strong> once more. I like the <strong>no nonsense</strong> approach in <strong>Raku</strong>. The best part is, no need to import any external library, everything is builtin.</p>
<p>You don&rsquo;t believe me? This is what I mean :-)</p>
<p>The following line in <strong>Perl</strong>,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">open (<span style="color:#66d9ef">my</span> $F, <span style="color:#e6db74">&#34;&lt;:encoding(utf8)&#34;</span>, $file)
    <span style="color:#f92672">or</span> die <span style="color:#e6db74">&#34;ERROR: Can&#39;t open $file: $!\n&#34;</span>;
</code></pre></div><p>becomes this in <strong>Raku</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">my</span> $io :<span style="color:#f92672">=</span> $file<span style="color:#f92672">.</span>IO;
</code></pre></div><p>Similary the following line in <strong>Perl</strong>,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">my</span> $row <span style="color:#f92672">=</span> <span style="color:#e6db74">&lt;$F&gt;</span>) {
</code></pre></div><p>became this in <strong>Raku</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">for</span> $io<span style="color:#f92672">.</span>lines <span style="color:#f92672">-&gt;</span> Str $line {
</code></pre></div><p>Rest is just the straight translation of <strong>Perl</strong> into <strong>Raku</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">sort</span>-data(Str $file, Bool $unique?) {

    <span style="color:#66d9ef">my</span> $io :<span style="color:#f92672">=</span> $file<span style="color:#f92672">.</span>IO;
    die <span style="color:#e6db74">&#34;ERROR: &#39;$file&#39; not found&#34;</span>    <span style="color:#66d9ef">unless</span> $io<span style="color:#f92672">.</span>e;
    die <span style="color:#e6db74">&#34;ERROR: &#39;$file&#39; not readable&#34;</span> <span style="color:#66d9ef">unless</span> $io<span style="color:#f92672">.</span>r;

    <span style="color:#66d9ef">my</span> @source <span style="color:#f92672">=</span> ();
    <span style="color:#66d9ef">my</span> %source <span style="color:#f92672">=</span> ();
    <span style="color:#66d9ef">for</span> $io<span style="color:#f92672">.</span>lines <span style="color:#f92672">-&gt;</span> Str $line {
        <span style="color:#66d9ef">my</span> ($mailbox, $domain) <span style="color:#f92672">=</span> $line<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#34;@&#34;</span>);
        push @source, [$mailbox, $domain];
        <span style="color:#66d9ef">if</span> $unique {
            %source<span style="color:#f92672">.</span>{$mailbox} <span style="color:#f92672">=</span> $domain;
        }
    }

    <span style="color:#66d9ef">my</span> $sorted <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;
    <span style="color:#66d9ef">if</span> $unique {
        <span style="color:#66d9ef">for</span> %source<span style="color:#f92672">.</span>sort({ $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>value<span style="color:#f92672">.</span>lc <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>value<span style="color:#f92672">.</span>lc <span style="color:#f92672">||</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>key <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>key }) <span style="color:#f92672">-&gt;</span> $k {
            <span style="color:#66d9ef">my</span> $_k <span style="color:#f92672">=</span> $k<span style="color:#f92672">.</span>keys;
            <span style="color:#66d9ef">my</span> $_v <span style="color:#f92672">=</span> $k<span style="color:#f92672">.</span>values;
            $sorted<span style="color:#f92672">.</span>push: ($_k, $_v)<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;@&#34;</span>);
        }
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">for</span> @source<span style="color:#f92672">.</span>sort({ $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>lc <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>lc <span style="color:#f92672">||</span> $<span style="color:#960050;background-color:#1e0010">^</span>a<span style="color:#f92672">.</span>[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">cmp</span> $<span style="color:#960050;background-color:#1e0010">^</span>b<span style="color:#f92672">.</span>[<span style="color:#ae81ff">1</span>] })<span style="color:#f92672">.</span>reverse <span style="color:#f92672">-&gt;</span> $k {
            $sorted<span style="color:#f92672">.</span>push: $k<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;@&#34;</span>);
        }
    }

    <span style="color:#66d9ef">return</span> $sorted;
}
</code></pre></div><p>The standalone app becomes just a thin wrapper around the above helper subroutine.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $FILE <span style="color:#f92672">=</span> $ARGV[<span style="color:#ae81ff">0</span>];
<span style="color:#66d9ef">my</span> $FLAG <span style="color:#f92672">=</span> $ARGV[<span style="color:#ae81ff">1</span>];

<span style="color:#66d9ef">my</span> $sorted <span style="color:#f92672">=</span> sort_data($FILE, $FLAG);
<span style="color:#66d9ef">print</span> join <span style="color:#e6db74">&#34;\n&#34;</span>, @$sorted, <span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><p>The power of <strong>MAIN()</strong> gives us the flexibility to impose parameter validation. We are also getting named parameter without putting any extra effort. The <code>:$file</code> gives us named parameter i.e. <code>--file=&lt;Str&gt;</code> and it is required parameter. This is what I call, best value for your money.</p>
<p>How about the second parameter <code>:$unique?</code></p>
<p>Well, I am sure, you must have guessed it already. It gives us <code>--unique</code>, an optional parameter.</p>
<p>Rest is just the wrapper around <strong>sub sort-data()</strong>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">MAIN</span>(Str :$file, Bool :$unique?) {

    <span style="color:#66d9ef">my</span> $sorted <span style="color:#f92672">=</span> sort<span style="color:#f92672">-</span>data($file, $unique);
    say $sorted<span style="color:#f92672">.</span>join(<span style="color:#e6db74">&#34;\n&#34;</span>);
}
</code></pre></div><p>To get the unit test, I just used the sample data provided in the task. Nothing great.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> Test::More;
<span style="color:#66d9ef">use</span> Test::Deep;

is_deeply ( sort_data(<span style="color:#e6db74">&#39;../data.txt&#39;</span>),
            [ <span style="color:#e6db74">&#39;user@alpha.example.org&#39;</span>,
              <span style="color:#e6db74">&#39;rjt@cpan.org&#39;</span>,
              <span style="color:#e6db74">&#39;rjt@CPAN.org&#39;</span>,
              <span style="color:#e6db74">&#39;Name@example.org&#39;</span>,
              <span style="color:#e6db74">&#39;name@example.org&#39;</span>,
            ],
            <span style="color:#e6db74">&#39;regular sort&#39;</span> );

is_deeply ( sort_data(<span style="color:#e6db74">&#39;../data.txt&#39;</span>, <span style="color:#e6db74">&#39;-u&#39;</span>),
            [ <span style="color:#e6db74">&#39;user@alpha.example.org&#39;</span>,
              <span style="color:#e6db74">&#39;rjt@CPAN.org&#39;</span>,
              <span style="color:#e6db74">&#39;Name@example.org&#39;</span>,
              <span style="color:#e6db74">&#39;name@example.org&#39;</span>,
            ],
            <span style="color:#e6db74">&#39;unique sort&#39;</span> );

done_testing;
</code></pre></div><p>Same as <strong>Perl</strong>, nothing new to talk about.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6"><span style="color:#66d9ef">use</span> Test;

is<span style="color:#f92672">-</span>deeply sort<span style="color:#f92672">-</span>data(<span style="color:#e6db74">&#39;../data.txt&#39;</span>),
          [ <span style="color:#e6db74">&#39;user@alpha.example.org&#39;</span>,
            <span style="color:#e6db74">&#39;rjt@cpan.org&#39;</span>,
            <span style="color:#e6db74">&#39;rjt@CPAN.org&#39;</span>,
            <span style="color:#e6db74">&#39;Name@example.org&#39;</span>,
            <span style="color:#e6db74">&#39;name@example.org&#39;</span>,
          ],
          <span style="color:#e6db74">&#39;regular sort&#39;</span>;

is<span style="color:#f92672">-</span>deeply sort<span style="color:#f92672">-</span>data(<span style="color:#e6db74">&#39;../data.txt&#39;</span>, True),
          [ <span style="color:#e6db74">&#39;user@alpha.example.org&#39;</span>,
            <span style="color:#e6db74">&#39;rjt@CPAN.org&#39;</span>,
            <span style="color:#e6db74">&#39;Name@example.org&#39;</span>,
            <span style="color:#e6db74">&#39;name@example.org&#39;</span>,
          ],
          <span style="color:#e6db74">&#39;unique sort&#39;</span>;

done<span style="color:#f92672">-</span>testing;
</code></pre></div><br>
<h2 id="task-2--n-queens">TASK #2 › N Queens</h2>
<h4 id="submitted-by-ryan-thompsonhttpsryca">Submitted by <strong><a href="https://ry.ca">Ryan Thompson</a></strong></h4>
<hr>
<br>
<p>A standard 8×8 chessboard has 64 squares. The Queen is a chesspiece that can attack in 8 directions, as shown by the green shaded squares below:</p>
<p><img src="/images/blog/Chessboard.svg" width=400 /></p>
<p>Your job is to write a script to work with a three dimensional chess <em>cube,</em> M×M×M in size, and find a solution that maximizes the number of queens that can be placed in that cube without attacking each other. Output one possible solution.</p>
<hr>
<br>
<p>When we (<strong>Ryan and I</strong>) agreed on this task for the weekly challenge, I thought, although, it was difficult task but doable. The most difficult bit, at least for me, was to visualise the workings in <strong>3D</strong> format. I looked up on web for explanation but couldn&rsquo;t find any to my satisfaction. We received the following <strong>Team PWC</strong> members solutions as of now <strong>1:30pm Saturday 30, 2020</strong>.</p>
<h3 id="perl-javier-luquehttpsgithubcommanwarperlweeklychallenge-clubblobmasterchallenge-062javier-luqueperlch-2pl-niels-van-dijkehttpsgithubcommanwarperlweeklychallenge-clubblobmasterchallenge-062perlboy1967perlch-2pl-and-roger-bell_westhttpsgithubcommanwarperlweeklychallenge-clubblobmasterchallenge-062roger-bell-westperlch-2pl">Perl: <strong><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-062/javier-luque/perl/ch-2.pl">Javier Luque</a></strong>, <strong><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-062/perlboy1967/perl/ch-2.pl">Niels van Dijke</a></strong> and <strong><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-062/roger-bell-west/perl/ch-2.pl">Roger Bell_West</a></strong>.</h3>
<h3 id="raku--luca-ferrarihttpsgithubcommanwarperlweeklychallenge-clubblobmasterchallenge-062luca-ferrarirakuch-2p6-and-sangeet-karhttpsgithubcommanwarperlweeklychallenge-clubblobmasterchallenge-062sangeet-karrakuch-2raku">Raku : <strong><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-062/luca-ferrari/raku/ch-2.p6">Luca Ferrari</a></strong> and <strong><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-062/sangeet-kar/raku/ch-2.raku">Sangeet Kar</a></strong>.</h3>
<br>
<p><strong>Sangeet Kar</strong> shared the <strong><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-062/sangeet-kar/python/ch-2.py">Python</a></strong> solution as well.</p>
<p>I haven&rsquo;t checked every solutions yet but will do when I find spare moments.</p>
<p>I didn&rsquo;t want to let it go without a fight. I asked my <strong>11 year old</strong> daughter to help me with <strong>2D</strong> solution. We did it together in the end.</p>
<p>First thing first, we need to create playing chessboard of giving <code>$N</code> size.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">create_board</span> {
    <span style="color:#66d9ef">my</span> ($N) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">my</span> $board <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $r (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
        <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $c (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
            $board<span style="color:#f92672">-&gt;</span>[$r][$c] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39; &#39;</span>;
        }
    }

    <span style="color:#66d9ef">return</span> $board;
}
</code></pre></div><p>Now I want to print the chessboard, there is one to print border line for size <code>8x8</code>.</p>
<pre><code>   +---+---+---+---+---+---+---+---+
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">print_line</span> {
    <span style="color:#66d9ef">my</span> ($col) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;   &#34;</span>;
    <span style="color:#66d9ef">foreach</span> (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $col) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;+---&#34;</span>;
    }
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;+\n&#34;</span>;
}
</code></pre></div><p>Similary, we have subroutine to display footer for <code>8x8</code>.</p>
<pre><code>     a   b   c   d   e   f   g   h
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">print_footer_label</span> {
    <span style="color:#66d9ef">my</span> ($col) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;     &#34;</span>;
    <span style="color:#66d9ef">my</span> $char <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;a&#39;</span>;
    <span style="color:#66d9ef">foreach</span> (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $col) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$char   &#34;</span>;
        $char<span style="color:#f92672">++</span>;
    }
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
}
</code></pre></div><p>Together with above helper subroutines, we now have something to show chessboard for <code>8x8</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">show_board</span> {
    <span style="color:#66d9ef">my</span> ($board) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">my</span> $row <span style="color:#f92672">=</span> $#$board;
    <span style="color:#66d9ef">my</span> $col <span style="color:#f92672">=</span> $row;
    <span style="color:#66d9ef">my</span> $j   <span style="color:#f92672">=</span> $row<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $r (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $row) {
        print_line($col);
        <span style="color:#66d9ef">print</span> sprintf(<span style="color:#e6db74">&#34;%2s &#34;</span>, $j);
        <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $c ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $col) {
            <span style="color:#66d9ef">print</span> sprintf(<span style="color:#e6db74">&#34;| %s &#34;</span>, $board<span style="color:#f92672">-&gt;</span>[$r][$c]);
        }
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;|\n&#34;</span>;
        <span style="color:#f92672">--</span>$j
    }
    print_line($col);
    print_footer_label($col);
}
</code></pre></div><pre><code>   +---+---+---+---+---+---+---+---+
 8 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 7 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 6 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 5 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 4 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 3 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 2 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 1 |   |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
     a   b   c   d   e   f   g   h
</code></pre>
<p>The fun part was to get the logic for safe cell. This is what we got at the end.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is_safe</span> {
    <span style="color:#66d9ef">my</span> ($board, $row, $col) <span style="color:#f92672">=</span> @_;

    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $c (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $col) {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> ($board<span style="color:#f92672">-&gt;</span>[$row][$c] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;Q&#39;</span>);
    }

    <span style="color:#66d9ef">my</span> $r <span style="color:#f92672">=</span> $row;
    <span style="color:#66d9ef">my</span> $c <span style="color:#f92672">=</span> $col;
    <span style="color:#66d9ef">while</span> ($r <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">&amp;&amp;</span> $c <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> ($board<span style="color:#f92672">-&gt;</span>[$r][$c] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;Q&#39;</span>);
        $r<span style="color:#f92672">--</span>;
        $c<span style="color:#f92672">--</span>;
    }

    $r <span style="color:#f92672">=</span> $row;
    $c <span style="color:#f92672">=</span> $col;
    <span style="color:#66d9ef">while</span> ($r <span style="color:#f92672">&lt;=</span> $#$board <span style="color:#f92672">&amp;&amp;</span> $c <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">0</span>) {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">if</span> ($board<span style="color:#f92672">-&gt;</span>[$r][$c] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#39;Q&#39;</span>);
        $r<span style="color:#f92672">++</span>;
        $c<span style="color:#f92672">--</span>;
    }

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
}
</code></pre></div><p>Time to place the <strong>Queen</strong> on the chessboard.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">place_queen</span> {
    <span style="color:#66d9ef">my</span> ($board, $col) <span style="color:#f92672">=</span> @_;
    $col <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">unless</span> defined $col;

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> ($col <span style="color:#f92672">&gt;</span> $#$board);

    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $row (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#$board) {
        <span style="color:#66d9ef">if</span> (is_safe($board, $row, $col)) {
            $board<span style="color:#f92672">-&gt;</span>[$row][$col] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Q&#39;</span>;
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> (place_queen($board, $col<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>));
            $board<span style="color:#f92672">-&gt;</span>[$row][$col] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39; &#39;</span>;
        }
    }

    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><p>Lets get it to work.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $N <span style="color:#f92672">=</span> $ARGV[<span style="color:#ae81ff">0</span>];
die <span style="color:#e6db74">&#34;ERROR: Missing N.\n&#34;</span>          <span style="color:#66d9ef">unless</span> defined $N;
die <span style="color:#e6db74">&#34;ERROR: Invalid N=$N (&gt;=4).\n&#34;</span> <span style="color:#66d9ef">unless</span> ($N <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">4</span>);

<span style="color:#66d9ef">my</span> $board <span style="color:#f92672">=</span> create_board($N);
place_queen($board);
show_board($board);
</code></pre></div><pre><code> $ perl ch-2.pl 8

   +---+---+---+---+---+---+---+---+
 8 | Q |   |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 7 |   |   |   |   |   |   | Q |   |
   +---+---+---+---+---+---+---+---+
 6 |   |   |   |   | Q |   |   |   |
   +---+---+---+---+---+---+---+---+
 5 |   |   |   |   |   |   |   | Q |
   +---+---+---+---+---+---+---+---+
 4 |   | Q |   |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 3 |   |   |   | Q |   |   |   |   |
   +---+---+---+---+---+---+---+---+
 2 |   |   |   |   |   | Q |   |   |
   +---+---+---+---+---+---+---+---+
 1 |   |   | Q |   |   |   |   |   |
   +---+---+---+---+---+---+---+---+
     a   b   c   d   e   f   g   h
</code></pre>
<hr>
<p>That&rsquo;s it for this week. Speak to you soon.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2020
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" rel="noreferrer" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

