<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Laurent Rosenfeld Weekly Review: Challenge - #017.">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Laurent Rosenfeld Weekly Review: Challenge - 017</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Laurent Rosenfeld Weekly Review: Challenge - 017</h2>
                    <div class="portfolio-meta">
                        <span>Wednesday, Oct 9, 2019</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/p6-review-challenge-017.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <hr>
<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>
<hr>
<h2 id="task-1-parsing-urls-with-a-perl-6-grammar">Task #1: Parsing URLs With a Perl 6 Grammar</h2>
<p>This is derived from my <a href="http://blogs.perl.org/users/laurent_r/2019/07/-perl-weekly-challenge.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-017/">Week 17 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>
<p>The challenge reads as follows:</p>
<p><em>Create a script to parse URL and print the components of URL. According to Wiki page, the URL syntax is as below:</em></p>
<pre><code>scheme:[//[userinfo@]host[:port]]path[?query][#fragment]
</code></pre>
<p><em>For example: jdbc:mysql://user:password@localhost:3306/pwc?profile=true#h1</em></p>
<pre><code>scheme:   jdbc:mysql
userinfo: user:password
host:     localhost
port:     3306
path:     /pwc
query:    profile=true
fragment: h1
</code></pre>
<h2 id="my-solution">My Solution</h2>
<p>It is quite possible to use regexes to solve this challenge (and that&rsquo;s what I did for my solution in Perl 5), but, in my humble opinion, the right way to parse a URL is of course to write a grammar, and this is great fun in Perl 6.</p>
<p>I can&rsquo;t explain  in detail how this works (as this would take many pages), but let me try to give an idea. First, we define a grammar, with a number of rules, regexes, or tokens. When we use a grammar with the <code>parse</code> method on a string, the parse method calls by default the TOP rule (or token) and tries to match this rule:</p>
<pre><code>rule TOP {
    &lt;scheme&gt; '//' &lt;authority&gt;? &lt;path&gt; [ '?' &lt;query&gt; ]? &lt;fragment&gt;?
}
</code></pre>
<p>This rules looks for a <code>&lt;scheme&gt;</code> component, followed by <code>//</code>, followed by an optional <code>&lt;authority&gt;</code> component, followed by a <code>&lt;path&gt;</code>component, etc. A <code>&lt;scheme&gt;</code> component is defined by the <code>scheme</code> token:</p>
<pre><code>token scheme { \w+ [ ':' \w+]? ':'}
</code></pre>
<p>which is composed of a group of alphanumerical characters, followed by an optional colon and another group of alphanumerical characters, and ending with a colon.</p>
<p>Similarly, the optional <code>&lt;authority&gt;</code> component, if it exists, is defined by the <code>authority</code> token:</p>
<pre><code>token authority { [&lt;userinfo&gt; '@']? &lt;host&gt; [':' &lt;port&gt;]? }
</code></pre>
<p>An <code>authority</code> component is itself composed of an optional <code>&lt;userinfo&gt;</code>and <code>@</code>, followed by a <code>&lt;host&gt;</code>, followed by an optional colon and a <code>&lt;port&gt;</code>. As you probably guessed by now, these three sub-components will be defined in other tokens, and so on.</p>
<p>In the end, if the string is successfully parsed, the result is stored into the <code>$/</code> match object. We can then lookup for the various components with a hash-like syntax on the match object. So for example, the <code>&lt;scheme&gt;</code> component can be found in <code>$/&lt;scheme&gt;</code> or, in the code below, in <code>$match&lt;scheme&gt;</code>, since I assigned the parse result (the match object) to the <code>$match</code> variable.</p>
<p>Now the full code of the program:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">use</span> v6;
<span style="color:#75715e"># use Grammar::Tracer;</span>

grammar URL {
    rule TOP {
        <span style="color:#e6db74">&lt;scheme&gt;</span> <span style="color:#e6db74">&#39;//&#39;</span> <span style="color:#e6db74">&lt;authority&gt;</span>? <span style="color:#e6db74">&lt;path&gt;</span> [ <span style="color:#e6db74">&#39;?&#39;</span> <span style="color:#e6db74">&lt;query&gt;</span> ]? <span style="color:#e6db74">&lt;fragment&gt;</span>?
    }
    token scheme { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span>]? <span style="color:#e6db74">&#39;:&#39;</span>}
    token authority { [<span style="color:#e6db74">&lt;userinfo&gt;</span> <span style="color:#e6db74">&#39;@&#39;</span>]? <span style="color:#e6db74">&lt;host&gt;</span> [<span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;port&gt;</span>]? }
    token userinfo { <span style="color:#e6db74">&lt;user&gt;</span> [<span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;password&gt;</span> ]?}
    token user { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> }
    token password { <span style="color:#f92672">&lt;-</span>[ @ <span style="color:#960050;background-color:#1e0010">]&gt;+</span> <span style="color:#960050;background-color:#1e0010">}</span>
    token host {
        <span style="color:#f92672">||</span> <span style="color:#e6db74">&lt;hostname&gt;</span>
        <span style="color:#f92672">||</span> <span style="color:#e6db74">&lt;ipv4&gt;</span>
        <span style="color:#f92672">||</span> <span style="color:#e6db74">&lt;ipv6&gt;</span>
    }
    token hostname { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> [ <span style="color:#e6db74">&#39;.&#39;</span> <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> ]<span style="color:#f92672">*</span> }
    token ipv4 { <span style="color:#e6db74">&lt;octet&gt;</span> [<span style="color:#e6db74">&#39;.&#39;</span> <span style="color:#e6db74">&lt;octet&gt;</span> ] <span style="color:#f92672">**</span> <span style="color:#ae81ff">3</span> }
    token octet { (<span style="color:#f92672">\</span>d <span style="color:#f92672">**</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">3</span>) <span style="color:#f92672">&lt;</span>?{<span style="color:#ae81ff">0</span> <span style="color:#f92672">&lt;=</span> $0 <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">255</span> }<span style="color:#f92672">&gt;</span>}
    token ipv6 { <span style="color:#e6db74">&#39;[&#39;</span> <span style="color:#e6db74">&lt;group&gt;</span> <span style="color:#f92672">**</span> <span style="color:#ae81ff">8</span> <span style="color:#e6db74">&#39;]&#39;</span> }
    token group { <span style="color:#e6db74">&lt;xdigit&gt;</span> <span style="color:#f92672">**</span> <span style="color:#ae81ff">4</span> }
    token port { <span style="color:#f92672">\</span>d<span style="color:#f92672">+</span> }
    token path { <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#e6db74">&lt;segment&gt;</span>? [ <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#e6db74">&lt;segment&gt;</span> ]<span style="color:#f92672">*</span> }
    token segment { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> [ <span style="color:#e6db74">&#39;::&#39;</span> <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> ]? }
    token query {  <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#e6db74">&lt;[\w\s]&gt;</span><span style="color:#f92672">+</span> }
    token fragment { <span style="color:#e6db74">&#39;#&#39;</span> <span style="color:#e6db74">&lt;frag_id&gt;</span> }
    token frag_id { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> }
}
<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">display</span> (Str $label, Str $value) {
    printf <span style="color:#e6db74">&#34;    %-15s:\t %-20s\n&#34;</span>, $label, $value;
}

<span style="color:#66d9ef">for</span> (<span style="color:#e6db74">&#39;jdbc:mysql://user:password@localhost:3306/pwc?profile=true#h1&#39;</span>,
     <span style="color:#e6db74">&#39;https://en.wikipedia.org/wiki/URL&#39;</span>,
     <span style="color:#e6db74">&#39;https://perlcon.eu/my&#39;</span>,
     <span style="color:#e6db74">&#39;https://www.perlmonks.org/?node=Seekers of Perl Wisdom&#39;</span>,
     <span style="color:#e6db74">&#39;https://metacpan.org/pod/Test::More&#39;</span>
    ) <span style="color:#f92672">-&gt;</span> $url<span style="color:#f92672">-</span>string {
    <span style="color:#66d9ef">my</span> $match <span style="color:#f92672">=</span> URL<span style="color:#f92672">.</span>parse($url<span style="color:#f92672">-</span>string);
    <span style="color:#66d9ef">if</span> $match {
        say <span style="color:#e6db74">&#34;Matched $url-string:&#34;</span>;
        display <span style="color:#e6db74">&#34;scheme&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;scheme&gt;</span>;
        display <span style="color:#e6db74">&#34;userinfo&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;authority&gt;&lt;userinfo&gt;</span>
            <span style="color:#66d9ef">if</span> defined $match<span style="color:#e6db74">&lt;authority&gt;&lt;userinfo&gt;</span>;
        display <span style="color:#e6db74">&#34;host&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;authority&gt;&lt;host&gt;</span>
            <span style="color:#66d9ef">if</span> defined $match<span style="color:#e6db74">&lt;authority&gt;&lt;host&gt;</span>;
        display <span style="color:#e6db74">&#34;port&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;authority&gt;&lt;port&gt;</span>
            <span style="color:#66d9ef">if</span> defined $match<span style="color:#e6db74">&lt;authority&gt;&lt;port&gt;</span>;
        display <span style="color:#e6db74">&#34;path&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;path&gt;</span>;
        display <span style="color:#e6db74">&#34;query&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;query&gt;</span> <span style="color:#66d9ef">if</span> defined $match<span style="color:#e6db74">&lt;query&gt;</span>;
        display <span style="color:#e6db74">&#34;fragment&#34;</span>, <span style="color:#f92672">~</span>$match<span style="color:#e6db74">&lt;fragment&gt;</span> <span style="color:#66d9ef">if</span> defined $match<span style="color:#e6db74">&lt;fragment&gt;</span>;
    } <span style="color:#66d9ef">else</span> {
        say <span style="color:#e6db74">&#34;Not matched $url-string&#34;</span>;
    }
}
</code></pre></div><p>And this is the output with our five test URLs:</p>
<pre><code>$ perl6  parse_url.p6
Matched jdbc:mysql://user:password@localhost:3306/pwc?profile=true#h1:
    scheme         :         jdbc:mysql:
    userinfo       :         user:password
    host           :         localhost
    port           :         3306
    path           :         /pwc
    query          :         profile=true
    fragment       :         #h1
Matched https://en.wikipedia.org/wiki/URL:
    scheme         :         https:
    host           :         en.wikipedia.org
    path           :         /wiki/URL
Matched https://perlcon.eu/my:
    scheme         :         https:
    host           :         perlcon.eu
    path           :         /my
Matched https://www.perlmonks.org/?node=Seekers of Perl Wisdom:
    scheme         :         https:
    host           :         www.perlmonks.org
    path           :         /
    query          :         node=Seekers of Perl Wisdom
Matched https://metacpan.org/pod/Test::More:
    scheme         :         https:
    host           :         metacpan.org
    path           :         /pod/Test::More
</code></pre>
<p>Undoubtedly, many more tests would be needed, as URLs can take many forms and we tested only a few cases.</p>
<h2 id="alternative-solutions">Alternative Solutions</h2>
<p>Since most solutions used regexes or grammars to perform the bulk of the work, it seems interesting to quote these grammars (except when they are too long) to provide a ground for comparisons.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/arne-sommer/perl6/ch-2.p6">Arne Sommer</a> used a regex to parse URLs:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">if</span> $url <span style="color:#f92672">~~</span>
  <span style="color:#f92672">/^</span>
    (<span style="color:#e6db74">&lt;[a..z]&gt;</span><span style="color:#f92672">&lt;</span>[a<span style="color:#f92672">..</span>z <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">9</span> <span style="color:#f92672">+</span> <span style="color:#f92672">.</span> : <span style="color:#f92672">\-</span>]<span style="color:#f92672">&gt;*</span>)<span style="color:#f92672">\</span>: <span style="color:#75715e"># $0 scheme</span>
    [<span style="color:#f92672">\</span><span style="color:#e6db74">/\/                               # /</span><span style="color:#f92672">/</span>
      [(<span style="color:#f92672">.*</span>[<span style="color:#f92672">\</span>:<span style="color:#f92672">.+</span>]?)<span style="color:#f92672">\</span>@<span style="color:#960050;background-color:#1e0010">]?</span>                  <span style="color:#960050;background-color:#1e0010">#</span> <span style="color:#960050;background-color:#1e0010">$</span>1 userinfo (optional)
      (<span style="color:#f92672">&lt;</span>[<span style="color:#f92672">\</span>w <span style="color:#f92672">\.</span> <span style="color:#f92672">\-</span>]<span style="color:#f92672">&gt;*</span>)                   <span style="color:#75715e"># $2 host</span>
      [<span style="color:#f92672">\</span>:(<span style="color:#f92672">\</span>d<span style="color:#f92672">+</span>)]?                        <span style="color:#75715e"># $3 port (optional)</span>
      (<span style="color:#f92672">\/</span>?)                             <span style="color:#75715e"># $4 path separator</span>
    ]?                                  <span style="color:#75715e"># $1-$4 are optional</span>
    ([<span style="color:#f92672">&lt;</span>[<span style="color:#f92672">\</span>w <span style="color:#f92672">\</span>d <span style="color:#f92672">-</span>] <span style="color:#f92672">-</span> [<span style="color:#75715e">#?]&gt;]+)?            # $5 path (optional)</span>
    [<span style="color:#f92672">\</span>?(<span style="color:#f92672">&lt;</span>[<span style="color:#f92672">\</span>w <span style="color:#f92672">\</span>d <span style="color:#f92672">\-</span> <span style="color:#f92672">=</span>]<span style="color:#f92672">&gt;*</span>)]?              <span style="color:#75715e"># $6 query (optional)</span>
    [<span style="color:#f92672">\</span><span style="color:#75715e">#(.*)]?                           # $7 fragment (optional)</span>
  $/
{ <span style="color:#75715e"># ...</span>
</code></pre></div><p>Note that I almost missed that Arne also wrote a <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/arne-sommer/perl6/url-parse-grammar">grammar-based solution</a>.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/noud/perl6/ch-2.p6">Noud</a> also used a regex to parse the input. I can&rsquo;t resist showing his very compact <code>parse</code> subroutine:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">parse</span>($url) {
    <span style="color:#66d9ef">my</span> @keys <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span>scheme userinfo host port path query fragment<span style="color:#f92672">&gt;</span>;
    <span style="color:#66d9ef">my</span> $reg <span style="color:#f92672">=</span> <span style="color:#e6db74">/ (\w+\:\w+)\:\/\/(\w+\:.+)\@(\w+)\:(\d+)(\/\w+)\?(.+)\#(\w+)$ /</span>;

    <span style="color:#66d9ef">return</span> Hash<span style="color:#f92672">.</span><span style="color:#66d9ef">new</span>(@keys Z ($url <span style="color:#f92672">~~</span> $reg)<span style="color:#f92672">.</span>values);
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/fjwhittle/perl6/ch-2.p6">Francis J. Whittle</a> created a full-fledged OOP program with three classes: <code>URL</code>, <code>URL::UserInfo</code>, and <code>A::URLish</code>.  Parsing itself is done with the <code>G::URLish</code> grammar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">grammar G::URLish {
  regex TOP {
    <span style="color:#f92672">^</span> <span style="color:#e6db74">&lt;scheme&gt;</span> <span style="color:#f92672">&lt;</span> : :<span style="color:#e6db74">//</span> <span style="color:#f92672">&gt;</span>
    <span style="color:#e6db74">&lt;userinfo&gt;</span>?
    [ <span style="color:#e6db74">&lt;host&gt;</span> [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;port&gt;</span> ]? <span style="color:#e6db74">&#39;/&#39;</span> ]?
    <span style="color:#e6db74">&lt;path&gt;</span>
    [ <span style="color:#e6db74">&#39;?&#39;</span> <span style="color:#e6db74">&lt;query&gt;</span> ]?
    [ <span style="color:#e6db74">&#39;#&#39;</span> <span style="color:#e6db74">&lt;fragment&gt;</span> ] ? $
  <span style="color:#960050;background-color:#1e0010">}</span>
  proto regex userinfo      { <span style="color:#f92672">*</span> }
  regex userinfo:sym<span style="color:#e6db74">&lt;user-pass&gt;</span> { <span style="color:#e6db74">&lt;user&gt;</span> [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;password&gt;</span> ]? <span style="color:#e6db74">&#39;@&#39;</span>                             }
  regex user            { <span style="color:#e6db74">&lt;.xpalpha&gt;</span><span style="color:#f92672">+</span>                                                }
  regex password        { <span style="color:#e6db74">&lt;.xpalpha&gt;</span><span style="color:#f92672">+</span>                                                }
  regex host            { <span style="color:#e6db74">&lt;.xpalpha&gt;</span><span style="color:#f92672">+</span>                                                }
  token port            { <span style="color:#e6db74">&lt;.digit&gt;</span><span style="color:#f92672">+</span>                                                  }
  <span style="color:#75715e"># For compatibility with the example, but I don&#39;t think : is valid here.</span>
  regex scheme          { <span style="color:#e6db74">&lt;.ialpha&gt;</span><span style="color:#f92672">+</span> [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;.ialpha&gt;</span><span style="color:#f92672">+</span> ]?                             }
  regex path            { [ <span style="color:#e6db74">&lt;.xpalpha&gt;</span><span style="color:#f92672">*</span> ]<span style="color:#f92672">+</span> % <span style="color:#960050;background-color:#1e0010">&#39;/&#39;</span>                                     <span style="color:#960050;background-color:#1e0010">}</span>
  regex query           { <span style="color:#e6db74">&lt;param&gt;</span><span style="color:#f92672">+</span> % <span style="color:#960050;background-color:#1e0010">&lt;[\&amp;;]&gt;</span>                                         <span style="color:#960050;background-color:#1e0010">}</span>
  regex param           { $<span style="color:#960050;background-color:#1e0010">&lt;</span>key<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&lt;.xalpha&gt;</span><span style="color:#f92672">+</span> ] [ <span style="color:#e6db74">&#39;=&#39;</span> $<span style="color:#960050;background-color:#1e0010">&lt;</span>value<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> [ <span style="color:#e6db74">&lt;.xalpha&gt;</span><span style="color:#f92672">+</span> ] ]? }
  token fragment        { <span style="color:#e6db74">&lt;.xalpha&gt;</span><span style="color:#f92672">+</span>                                                 }
  token xalpha          { <span style="color:#e6db74">&lt;.alpha&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;.digit&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;.safe&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;.extra&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;.escape&gt;</span>       }
  token xpalpha         { <span style="color:#e6db74">&lt;.xalpha&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;+&#39;</span>                                            }
  token ialpha          { <span style="color:#e6db74">&lt;.alpha&gt;</span> [ <span style="color:#e6db74">&lt;.xalpha&gt;</span><span style="color:#f92672">+</span> ]                                    }
  token alpha           { <span style="color:#f92672">&lt;</span>[a<span style="color:#f92672">..</span>z A<span style="color:#f92672">..</span>Z]<span style="color:#f92672">&gt;</span>                                              }
  token digit           { <span style="color:#e6db74">&lt;[0..9]&gt;</span>                                                   }
  token safe            { <span style="color:#f92672">&lt;</span>[$ <span style="color:#960050;background-color:#1e0010">\-</span> _ @ <span style="color:#960050;background-color:#1e0010">.</span> <span style="color:#960050;background-color:#1e0010">&amp;]&gt;</span>                                           <span style="color:#960050;background-color:#1e0010">}</span>
  token extra           { <span style="color:#f92672">&lt;</span>[<span style="color:#f92672">!</span> <span style="color:#f92672">*</span> <span style="color:#960050;background-color:#1e0010">&#34;</span> <span style="color:#e6db74">&#39; ( ) ,]&gt;                                          }
</span><span style="color:#e6db74">  token reserved        { &lt;[= ; / # ? : ]&gt; || &#39;</span> <span style="color:#e6db74">&#39;                                    }
</span><span style="color:#e6db74">  token escape          { &#39;</span>%<span style="color:#960050;background-color:#1e0010">&#39;</span> <span style="color:#960050;background-color:#1e0010">&lt;[</span>0<span style="color:#f92672">..</span><span style="color:#ae81ff">9</span> a<span style="color:#f92672">..</span>z A<span style="color:#f92672">..</span>Z]<span style="color:#f92672">&gt;</span> <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>                                }
  token national        { <span style="color:#f92672">&lt;</span>[{ } <span style="color:#f92672">|</span> <span style="color:#f92672">\</span>[ <span style="color:#f92672">\</span>] <span style="color:#f92672">\\</span> <span style="color:#f92672">^</span> <span style="color:#f92672">~</span>]<span style="color:#f92672">&gt;</span>                                     }
  token punctuation     { <span style="color:#f92672">&lt;</span>[<span style="color:#f92672">&lt;</span> <span style="color:#f92672">&gt;</span>]<span style="color:#f92672">&gt;</span>                                                    }
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/kevin-colyer/perl6/ch-2.p6">Kevin Colyer</a> created a <code>URL</code> grammar to parse the input. Kevin also wrote a voluminous test suite. And he used an actions class with a <code>TOP</code> method to populate a hash with the various components of the URL.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/ozzy/perl6/ch-2.p6">Ozzy</a> used a quite concise grammar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">grammar G {
    regex TOP { <span style="color:#f92672">^</span> <span style="color:#e6db74">&lt;scheme&gt;</span> <span style="color:#e6db74">&#39;:&#39;</span> [<span style="color:#e6db74">&#39;//&#39;</span> <span style="color:#e6db74">&lt;authority&gt;</span>]? <span style="color:#e6db74">&lt;path&gt;</span> [<span style="color:#e6db74">&#39;?&#39;</span> <span style="color:#e6db74">&lt;query&gt;</span>]? [<span style="color:#e6db74">&#39;#&#39;</span> <span style="color:#e6db74">&lt;fragment&gt;</span>]? $ <span style="color:#960050;background-color:#1e0010">}</span>
    token scheme    { <span style="color:#e6db74">&lt;+alpha-[_]&gt;</span> <span style="color:#f92672">&lt;</span>[<span style="color:#f92672">\</span>w <span style="color:#f92672">\+</span> <span style="color:#f92672">\.</span> <span style="color:#f92672">\-</span>]<span style="color:#f92672">&gt;+</span>          }
    token authority { [<span style="color:#e6db74">&lt;userinfo&gt;</span> <span style="color:#e6db74">&#39;@&#39;</span>]? <span style="color:#e6db74">&lt;host&gt;</span> [<span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;port&gt;</span>]? }
    token userinfo  {  <span style="color:#e6db74">&lt;user&gt;</span> [<span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;password&gt;</span>]?              }
    token user      { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span>           }
    token password  { <span style="color:#f92672">\</span>w<span style="color:#f92672">*</span>           }
    token host      { <span style="color:#e6db74">&lt;[\w\.\[\]]&gt;</span><span style="color:#f92672">+</span> }
    token port      { <span style="color:#f92672">\</span>d<span style="color:#f92672">+</span>           }
    token path      { [ <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> ]<span style="color:#f92672">+</span>  }
    token query     { <span style="color:#e6db74">&lt;[=\w]&gt;</span><span style="color:#f92672">+</span>      }
    token fragment  { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span>           }
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/feng-chang/perl6/ch-2.p6">Feng Chang</a> also created a <code>URL</code> grammar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl6" data-lang="perl6">grammar URL {
    token TOP { <span style="color:#f92672">^</span>
        <span style="color:#e6db74">&lt;scheme&gt;</span> <span style="color:#e6db74">&#39;:&#39;</span>
        [ <span style="color:#e6db74">&#39;//&#39;</span>
            [ <span style="color:#e6db74">&lt;userinfo&gt;</span> <span style="color:#e6db74">&#39;@&#39;</span> ]?
            <span style="color:#e6db74">&lt;host&gt;</span>
            [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;port&gt;</span> ]?
        ]?
        <span style="color:#e6db74">&lt;path&gt;</span> [ <span style="color:#e6db74">&#39;?&#39;</span> <span style="color:#e6db74">&lt;queries&gt;</span> ]? [ <span style="color:#e6db74">&#39;#&#39;</span> <span style="color:#e6db74">&lt;fragment&gt;</span> ]?
    $ <span style="color:#960050;background-color:#1e0010">}</span>
    token       scheme { <span style="color:#e6db74">&lt;id&gt;</span> }
    token     userinfo { <span style="color:#e6db74">&lt;user&gt;</span> [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;password&gt;</span> ]? }
    token         user { <span style="color:#e6db74">&lt;id&gt;</span> }
    token     password { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> }
    token         host { [ <span style="color:#e6db74">&lt;IPv4-address&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;domain-name&gt;</span> ] }
    token IPv4<span style="color:#f92672">-</span>address { [<span style="color:#f92672">\</span>d <span style="color:#f92672">**</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">3</span>] <span style="color:#f92672">**</span> <span style="color:#ae81ff">4</span> % <span style="color:#960050;background-color:#1e0010">&#39;.&#39;</span> <span style="color:#960050;background-color:#1e0010">}</span>
    token        dname { <span style="color:#e6db74">&lt;[a..zA..Z]&gt;</span> <span style="color:#e6db74">&lt;[-a..zA..Z0..9]&gt;</span><span style="color:#f92672">*</span> }
    token  domain<span style="color:#f92672">-</span>name { <span style="color:#e6db74">&lt;dname&gt;</span><span style="color:#f92672">+</span> % <span style="color:#960050;background-color:#1e0010">&#39;.&#39;</span> <span style="color:#960050;background-color:#1e0010">}</span>
    token         port { <span style="color:#f92672">\</span>d<span style="color:#f92672">+</span> }
    token         path { <span style="color:#e6db74">&#39;/&#39;</span> [<span style="color:#e6db74">&lt;[a..zA..Z0..9]&gt;</span><span style="color:#f92672">+</span>] <span style="color:#f92672">*</span>%% <span style="color:#960050;background-color:#1e0010">&#39;/&#39;</span> <span style="color:#960050;background-color:#1e0010">}</span>
    token          key { <span style="color:#e6db74">&lt;id&gt;</span> }
    token        value { <span style="color:#f92672">\</span>w<span style="color:#f92672">+</span> }
    token        query { <span style="color:#e6db74">&lt;key&gt;</span> <span style="color:#e6db74">&#39;=&#39;</span> <span style="color:#e6db74">&lt;value&gt;</span> }
    token      queries { <span style="color:#e6db74">&lt;query&gt;</span> <span style="color:#f92672">+</span>% <span style="color:#960050;background-color:#1e0010">&#39;&amp;&#39;</span> <span style="color:#960050;background-color:#1e0010">}</span>
    token     fragment { <span style="color:#e6db74">&lt;id&gt;</span> }
    token           id { <span style="color:#e6db74">&lt;[a..zA..Z]&gt;</span> <span style="color:#e6db74">&lt;[-+.a..zA..Z0..9]&gt;</span><span style="color:#f92672">*</span> }
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/jaldhar-h-vyas/perl6/ch-2.p6">Jaldhar H. Vyas</a> also created a <code>URL</code> grammar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">grammar URL {
    token TOP {
        <span style="color:#e6db74">&lt;Scheme&gt;</span> <span style="color:#e6db74">&#39;:&#39;</span>
        [
            <span style="color:#e6db74">&#39;//&#39;</span>?
            [ <span style="color:#e6db74">&lt;Userinfo&gt;</span> <span style="color:#e6db74">&#39;@&#39;</span> ]?
            <span style="color:#e6db74">&lt;Host&gt;</span>
            [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;Port&gt;</span> ]?
        ]?
        <span style="color:#e6db74">&lt;Path&gt;</span>?  <span style="color:#e6db74">&#39;?&#39;</span> <span style="color:#e6db74">&lt;Query&gt;</span> ]? [ <span style="color:#e6db74">&#39;#&#39;</span> <span style="color:#e6db74">&lt;Fragment&gt;</span> ]?
    }
    token Scheme { <span style="color:#e6db74">&lt;SchemeChar&gt;</span><span style="color:#f92672">+</span> }
    token Userinfo { <span style="color:#e6db74">&lt;UserinfoChar&gt;</span><span style="color:#f92672">+</span> }
    token Host { <span style="color:#e6db74">&lt;IPv4&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;Unreserved&gt;</span><span style="color:#f92672">+</span> }
    token Port { <span style="color:#f92672">\</span>d<span style="color:#f92672">+</span> }
    token Path { <span style="color:#e6db74">&lt;PathChar&gt;</span><span style="color:#f92672">+</span> }
    token Query { <span style="color:#e6db74">&lt;QueryOrFragment&gt;</span><span style="color:#f92672">+</span> }
    token Fragment { <span style="color:#e6db74">&lt;QueryOrFragment&gt;</span><span style="color:#f92672">+</span> }
    token SchemeChar { <span style="color:#f92672">&lt;</span>[ A<span style="color:#f92672">..</span>Z a<span style="color:#f92672">..</span>z <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">9</span> <span style="color:#f92672">+</span> <span style="color:#f92672">\-</span> <span style="color:#f92672">.</span> ]<span style="color:#f92672">&gt;</span> }
    token DecOctet { <span style="color:#f92672">\</span>d <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;[1..9]&gt;</span><span style="color:#f92672">\</span>d <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">\</span>d<span style="color:#f92672">\</span>d <span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span><span style="color:#e6db74">&lt;[0..4]&gt;</span><span style="color:#f92672">\</span>d <span style="color:#f92672">|</span> <span style="color:#ae81ff">25</span><span style="color:#e6db74">&lt;[0..5]&gt;</span> }
    token HexOctet { <span style="color:#f92672">&lt;</span>[ <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">9</span> A<span style="color:#f92672">..</span>F a<span style="color:#f92672">..</span>f ]<span style="color:#f92672">&gt;</span> <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span> }
    token IPv4 { <span style="color:#e6db74">&lt;DecOctet&gt;</span> <span style="color:#f92672">\.</span> <span style="color:#e6db74">&lt;DecOctet&gt;</span> <span style="color:#f92672">\.</span> <span style="color:#e6db74">&lt;DecOctet&gt;</span> <span style="color:#f92672">\.</span> <span style="color:#e6db74">&lt;DecOctet&gt;</span> }
    token PChar { <span style="color:#e6db74">&lt;UserinfoChar&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;@&#39;</span> }
    token PathChar { <span style="color:#e6db74">&lt;PChar&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;/&#39;</span> }
    token PctEncoded { <span style="color:#f92672">\</span>% <span style="color:#960050;background-color:#1e0010">&lt;</span>HexOctet<span style="color:#f92672">&gt;</span> }
    token QueryOrFragment { <span style="color:#e6db74">&lt;PChar&gt;</span> <span style="color:#f92672">|</span> <span style="color:#f92672">\/</span> <span style="color:#f92672">|</span> <span style="color:#f92672">\</span>? }
    token SubDelim { <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\!</span> $ <span style="color:#960050;background-color:#1e0010">&amp;</span> <span style="color:#960050;background-color:#1e0010">\&#39;</span> <span style="color:#960050;background-color:#1e0010">\(</span> <span style="color:#960050;background-color:#1e0010">\</span>) <span style="color:#f92672">*</span> <span style="color:#f92672">\+</span> <span style="color:#f92672">\</span>, <span style="color:#f92672">\</span>; <span style="color:#f92672">\=</span> ]<span style="color:#f92672">&gt;</span> }
    token Unreserved { <span style="color:#f92672">&lt;</span>[ A<span style="color:#f92672">..</span>Z a<span style="color:#f92672">..</span>z <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">9</span> <span style="color:#f92672">\-</span> <span style="color:#f92672">.</span> _ <span style="color:#f92672">\~</span> ]<span style="color:#f92672">&gt;</span> }
    token UserinfoChar { <span style="color:#e6db74">&lt;Unreserved&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;PctEncoded&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&lt;SubDelim&gt;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;:&#39;</span> }
}
</code></pre></div><p>Jaldhar used an actions class with one method to display each of the URL components.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/joelle-maslak/perl6/ch-2.p6">Joelle Maslak</a> also defined a <code>URL</code> grammar. I like the way she used character class &ldquo;subtractions&rdquo; to define several of her tokens (for example <code>username</code>, <code>password</code>, etc.), leading to a fairly concise grammar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">grammar URL {
    token TOP      {
        <span style="color:#f92672">^</span> <span style="color:#e6db74">&lt;scheme&gt;</span> <span style="color:#e6db74">&#39;:&#39;</span>
        [
            <span style="color:#e6db74">&#39;//&#39;</span>
            [ <span style="color:#e6db74">&lt;userinfo&gt;</span> <span style="color:#e6db74">&#39;@&#39;</span> ]?
            <span style="color:#e6db74">&lt;host&gt;</span>
            [ <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;port&gt;</span> ]?
        ]?
        <span style="color:#e6db74">&lt;path&gt;</span> [ <span style="color:#e6db74">&#39;?&#39;</span> <span style="color:#e6db74">&lt;query&gt;</span> ]? [ <span style="color:#e6db74">&#39;#&#39;</span> <span style="color:#e6db74">&lt;fragment&gt;</span> ]? $
    <span style="color:#960050;background-color:#1e0010">}</span>
    token scheme   { <span style="color:#f92672">&lt;</span>[A <span style="color:#f92672">..</span> Z a <span style="color:#f92672">..</span> z ]<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&lt;</span>[ A <span style="color:#f92672">..</span> Z a <span style="color:#f92672">..</span> z <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">9</span> <span style="color:#f92672">.</span> <span style="color:#f92672">+</span> <span style="color:#f92672">-</span> ]<span style="color:#f92672">&gt;*</span> }
    token userinfo { <span style="color:#e6db74">&lt;username&gt;</span> <span style="color:#e6db74">&#39;:&#39;</span> <span style="color:#e6db74">&lt;password&gt;</span> }
    token username { <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\</span>S ] <span style="color:#f92672">-</span> [ : ]<span style="color:#f92672">&gt;+</span> }
    token password { <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\</span>S ] <span style="color:#f92672">-</span> [ @ <span style="color:#960050;background-color:#1e0010">]&gt;*</span> <span style="color:#960050;background-color:#1e0010">}</span>
    token host     { <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\</span>S ] <span style="color:#f92672">-</span> [ : ? <span style="color:#f92672">/</span> <span style="color:#f92672">\</span><span style="color:#75715e"># ]&gt;+ }</span>
    token port     { <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\</span>S ] <span style="color:#f92672">-</span> [ ? <span style="color:#f92672">/</span> <span style="color:#f92672">\</span><span style="color:#75715e"># ]&gt;+ }</span>
    token path     { [ <span style="color:#e6db74">&#39;/&#39;</span> <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\</span>S ] <span style="color:#f92672">-</span> [ ? <span style="color:#f92672">\</span><span style="color:#75715e"># ]&gt;* ]? }</span>
    token query    { <span style="color:#f92672">&lt;</span>[ <span style="color:#f92672">\</span>S ] <span style="color:#f92672">-</span> [ <span style="color:#f92672">\</span><span style="color:#75715e"># ]&gt;* }</span>
    token fragment { <span style="color:#f92672">\</span>S<span style="color:#f92672">*</span> }
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/ruben-westerberg/perl6/ch-2.p6">Ruben Westerberg</a> defined a relatively compact <code>URI</code> grammar:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Perl6" data-lang="Perl6">grammar URI {
    token TOP {<span style="color:#e6db74">&lt;scheme&gt;</span><span style="color:#f92672">\</span>:<span style="color:#e6db74">&lt;authority&gt;</span>?<span style="color:#e6db74">&lt;path&gt;</span>[<span style="color:#f92672">\</span>?<span style="color:#e6db74">&lt;query&gt;</span>]?[<span style="color:#f92672">\</span><span style="color:#75715e">#&lt;fragment&gt;]?};##|&lt;authority&gt;};</span>
    token scheme { :i(<span style="color:#e6db74">&lt;alpha&gt;</span>[<span style="color:#f92672">&lt;</span>[<span style="color:#f92672">\-\.\+</span>] <span style="color:#f92672">+</span> alnum<span style="color:#f92672">&gt;</span>]<span style="color:#f92672">*</span>)};
    token path { (<span style="color:#f92672">\/</span>[<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">\/</span>?]<span style="color:#f92672">*</span>)<span style="color:#f92672">+</span>};
    token authority { (<span style="color:#f92672">\/\/</span>)[<span style="color:#e6db74">&lt;user&gt;</span>[<span style="color:#f92672">\</span>:<span style="color:#e6db74">&lt;password&gt;</span>]?<span style="color:#f92672">\</span>@<span style="color:#960050;background-color:#1e0010">]?&lt;</span>host<span style="color:#f92672">&gt;</span>[<span style="color:#f92672">\</span>:<span style="color:#e6db74">&lt;port&gt;</span>]?};
    token user { (<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">+</span>)};
    token password { ( <span style="color:#e6db74">&lt;alnum&gt;</span> <span style="color:#f92672">+</span>)};
    token host { (<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">+</span>)};
    token port { (<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">+</span>)};
    token query { <span style="color:#e6db74">&lt;qpair&gt;</span>[<span style="color:#f92672">\&amp;</span><span style="color:#e6db74">&lt;qpair&gt;</span>]<span style="color:#f92672">*</span>};
    token qpair { (<span style="color:#e6db74">&lt;qkey&gt;</span><span style="color:#f92672">\=</span><span style="color:#e6db74">&lt;qval&gt;</span>)<span style="color:#f92672">+</span>};
    token qkey {<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">+</span>};
    token qval {<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">+</span>};
    token fragment { (<span style="color:#e6db74">&lt;alnum&gt;</span><span style="color:#f92672">+</span>)};
}
</code></pre></div><p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-017/athanasius/perl6/ch-2.p6">Athanasius</a> took a very different path compared to other challengers and used a Perl 5 module from the CPAN: <code>URI::Split</code>. He otherwise used regexes for validating components presumably not properly checked by the module (scheme and authority).</p>
<h2 id="see-also">SEE ALSO</h2>
<p>Only two blogs this time:</p>
<p>Arne Sommer: <a href="https://perl6.eu/ackerman-url.html">https://perl6.eu/ackerman-url.html</a></p>
<p>Jaldar H. Vyas: <a href="https://www.braincells.com/perl/2019/07/perl_weekly_challenge_week_17.html">https://www.braincells.com/perl/2019/07/perl_weekly_challenge_week_17.html</a></p>
<h2 id="wrapping-up">Wrapping up</h2>
<p>Please let me know if I forgot any of the challengers or if you think my explanation of your code misses something important.</p>
<p>If you want to participate to the Perl Weekly Challenge, please connect to <a href="https://perlweeklychallenge.org/">this site</a>.</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2020
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" rel="noreferrer" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

