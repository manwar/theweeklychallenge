<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Ryan Thompson › Perl Weekly Review: Challenge - #046">
    <meta name="author" content="The Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.67.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ryan Thompson › Perl Weekly Review: Challenge - #046</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source Code Pro' rel='stylesheet'>
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">

    <style>
        #goTopButton {
            display: none;          
              position: fixed;        
              bottom: 20px;           
              right: 30px;            
              z-index: 99;            
              border: none;           
              outline: none;          
              background-color: red;  
              color: white;           
              cursor: pointer;        
              padding: 15px;          
              border-radius: 10px;    
              font-size: 18px;        
        }

        #goTopButton:hover {
              background-color: #555;
        }
    </style>


</head>

<body>

<button onclick="goTop()" id="goTopButton" title="Go to top">Top</button>

<script>

    topButton = document.getElementById("goTopButton");

    
    window.onscroll = function() { scrollFunction() };

    function scrollFunction() {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            topButton.style.display = "block";
        } else {
            topButton.style.display = "none";
        }
    }

    
    function goTop() {
        document.body.scrollTop = 0; 
        document.documentElement.scrollTop = 0; 
    }

</script>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Ryan Thompson › Perl Weekly Review: Challenge - #046</h2>
                    <div class="portfolio-meta">
                        <span>Monday, Feb 17, 2020</span>|
                        <span> Tags:
                            perl
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/flip_500.png">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    <p>Continues from <a href="/blog/review-challenge-045/">previous week</a>.</p>
<p>Welcome to the Perl review for Week 046 of the Weekly Challenge! For a quick overview, go through the <a href="/blog/perl-weekly-challenge-046/">original tasks</a> and <a href="/blog/recap-challenge-046/">recap</a> of the weekly challenge.</p>
<h2 id="getting-in-touch">Getting in Touch</h2>
<p><a href="mailto:rjt@cpan.org"><img src="http://ry.ca/misc/Email.svg" height="50" width="50"> Email</a> › Email me (Ryan) with any feedback about this review.</p>
<p><a href="https://github.com/manwar/perlweeklychallenge"><img src="http://ry.ca/misc/Github.svg" height="50" width="50"> GitHub</a> › Submit a pull request for any issues you may find with this page.</p>
<p><a href="https://twitter.com/perlwchallenge"><img src="http://ry.ca/misc/Twitter.svg" height="50" width="50"> Twitter</a> › Join the discussion on Twitter!</p>
<p>We&rsquo;d greatly appreciate any feedback you&rsquo;d like to give.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<h3 id="task-1--cryptic-messagetask1"><a href="#task1">Task 1 › Cryptic Message</a></h3>
<p>[ <a href="#alicia-bielsa1">Alicia Bielsa</a>  | <a href="#andrezgz1">Andrezgz</a>  | <a href="#athanasius1">Athanasius</a>  | <a href="#cheok-yin-fung1">Cheok-Yin Fung</a>  | <a href="#cristian-heredia1">Cristina Heredia</a>  | <a href="#dave-jacoby1">Dave Jacoby</a>  | <a href="#duane-powell1">Duane Powell</a>  | <a href="#duncan-c-white1">Duncan C. White</a>  | <a href="#e-choroba1">E. Choroba</a>  | <a href="#jaldhar-h-vyas1">Jaldhar H. Vyas</a>  | <a href="#javier-luque1">Javier Luque</a>  | <a href="#laurent-rosenfeld1">Laurent Rosenfeld</a>  | <a href="#mohammad-anwar1">Mohammad S Anwar</a>  | <a href="#rage3111">Rage311</a>  | <a href="#roger-bell-west1">Roger Bell West</a>  | <a href="#ruben-westerberg1">Ruben Westerberg</a>  | <a href="#ryan-thompson1">Ryan Thompson</a>  | <a href="#saiftynet1">Saif Ahmed</a>  | <a href="#ulrich-rieke1">Ulrich Rieke</a>  | <a href="#user-person1">User Person</a>  | <a href="#wanderdoc1">Wanderdoc</a>  ]</p>
<h3 id="task-2--500-doorstask2"><a href="#task2">Task 2 › 500 Doors</a></h3>
<p>[ <a href="#alicia-bielsa2">Alicia Bielsa</a>  | <a href="#andrezgz2">Andrezgz</a>  | <a href="#athanasius2">Athanasius</a>  | <a href="#cheok-yin-fung2">Cheok-Yin Fung</a>  | <a href="#colin-crain2">Colin Crain</a>  | <a href="#cristian-heredia2">Cristina Heredia</a>  | <a href="#dave-jacoby2">Dave Jacoby</a>  | <a href="#duane-powell2">Duane Powell</a>  | <a href="#duncan-c-white2">Duncan C. White</a>  | <a href="#e-choroba2">E. Choroba</a>  | <a href="#jaldhar-h-vyas2">Jaldhar H. Vyas</a>  | <a href="#javier-luque2">Javier Luque</a>  | <a href="#laurent-rosenfeld2">Laurent Rosenfeld</a>  | <a href="#mohammad-anwar2">Mohammad S Anwar</a> | <a href="#peter-scott2">Peter Scott</a> | <a href="#rage3112">Rage311</a>  | <a href="#roger-bell-west2">Roger Bell West</a>  | <a href="#ruben-westerberg2">Ruben Westerberg</a>  | <a href="#ryan-thompson2">Ryan Thompson</a>  | <a href="#saiftynet2">Saif Ahmed</a>  | <a href="#ulrich-rieke2">Ulrich Rieke</a>  | <a href="#user-person2">User Person</a>  | <a href="#wanderdoc2">Wanderdoc</a>  ]</p>
<h3 id="blogsblogs"><a href="#blogs">Blogs</a></h3>
<hr>
<hr>
<h1 id="task1">Task #1 - Cryptic Message</h1>
<p>This task had us resolving &ldquo;unreliable transmissions&rdquo; that were sent repeatedly, each time with errors in different locations in the string, such as this one:</p>
<pre><code>P + 2 l ! a t o
1 e 8 0 R $ 4 u
5 - r ] + a &gt; /
P x w l b 3 k \
2 e 3 5 R 8 y u
&lt; ! r ^ ( ) k 0
</code></pre><p>That spells <code>PerlRaku</code>, which you can arrive at by noticing that only one character in each column will be repeated.</p>
<hr>
<h2 id="my-general-observations">My general observations</h2>
<p>Both example ciphers show that each plaintext character appears exactly twice in each column, and the other characters appear exactly once. Naturally, some hackers relied on this and printed all characters that appeared twice. Some hackers took a more permissive or general interpretation, and calculated the frequency of each character, printing whichever character appeared most often in each column.</p>
<hr>
<h2 id="alicia-bielsa1">Alicia Bielsa</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/alicia-bielsa/perl/ch-1.pl">Alicia Bielsa&rsquo;s solution</a> searches an array of arrays (AoA) for characters that have appeared twice.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @aCharactersRepeated <span style="color:#f92672">=</span> ();
<span style="color:#66d9ef">my</span> $lengthMessage <span style="color:#f92672">=</span> scalar(@aMessage1);
<span style="color:#66d9ef">my</span> @aAllMessages <span style="color:#f92672">=</span> (@aMessage1, @aMessage2 ,@aMessage3, @aMessage4, @aMessage5 ,@aMessage6);
<span style="color:#66d9ef">my</span> %hCharacters <span style="color:#f92672">=</span> ();
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $indexAllMesages (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#aAllMessages){
    <span style="color:#66d9ef">my</span> $indexMessage <span style="color:#f92672">=</span>  $indexAllMesages % <span style="color:#960050;background-color:#1e0010">$</span>lengthMessage;
    <span style="color:#66d9ef">my</span> $currentCharacter <span style="color:#f92672">=</span> $aAllMessages[$indexAllMesages];
    <span style="color:#66d9ef">unless</span> (exists($hCharacters{$indexMessage})){
        $hCharacters{$indexMessage} <span style="color:#f92672">=</span>();
    }
    <span style="color:#66d9ef">unless</span> (exists($hCharacters{$indexMessage}{$currentCharacter})){
        $hCharacters{$indexMessage}{$currentCharacter} <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> ;
    }
    $hCharacters{$indexMessage}{$currentCharacter} <span style="color:#f92672">++</span>;
    <span style="color:#66d9ef">if</span> ($hCharacters{$indexMessage}{$currentCharacter} <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span> ){
        $aCharactersRepeated[$indexMessage] <span style="color:#f92672">=</span> $currentCharacter;
    }
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Decrypted Message:&#34;</span>;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $character (@aCharactersRepeated){
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$character&#34;</span>;
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><p>Alicia uses <code>%hCharacters</code> to store her frequency map, where <code>$hCharacters{A}{$indexMessage} == $N</code> if <code>'A'</code> appears <code>$N</code> times in column <code>$indexMessage</code>.</p>
<h2 id="andrezgz1">Andrezgz</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/andrezgz/perl/ch-1.pl">Andrezgz&rsquo;s solution</a> stores the messages as an AoA and then decrypts it with the following nested loops:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $msg_len <span style="color:#f92672">=</span> scalar @{$msg<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>]};
<span style="color:#66d9ef">my</span> @decrypted <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;?&#39;</span>) x $msg_len;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> @{$msg}<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $j (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $i<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
        <span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $msg_len<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
            $decrypted[$_] <span style="color:#f92672">=</span> $msg<span style="color:#f92672">-&gt;</span>[$i]<span style="color:#f92672">-&gt;</span>[$_] <span style="color:#66d9ef">if</span> ($msg<span style="color:#f92672">-&gt;</span>[$i]<span style="color:#f92672">-&gt;</span>[$_] <span style="color:#f92672">eq</span> $msg<span style="color:#f92672">-&gt;</span>[$j]<span style="color:#f92672">-&gt;</span>[$_]);
        }
    }
    <span style="color:#66d9ef">print</span> @decrypted,<span style="color:#e6db74">&#34;\n&#34;</span>;
}
</code></pre></div><p>The way in which the answer is built up and printed at each stage as more columns are &ldquo;solved&rdquo; is interesting, reminding me vaguely of <a href="https://en.wikipedia.org/wiki/Matrix_digital_rain">Matrix code</a>:</p>
<pre><code>????????
?????a??
P??l?a??
Pe?lRa?u
PerlRaku
</code></pre><h2 id="athanasius1">Athanasius</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/athanasius/perl/ch-1.pl">Athanasius&rsquo; solution</a> includes a convenience function to turn a string input with newlines into an AoA:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;P + 2 l ! a t o
</span><span style="color:#e6db74">               1 e 8 0 R $ 4 u
</span><span style="color:#e6db74">               5 - r ] + a &gt; /
</span><span style="color:#e6db74">               P x w l b 3 k \
</span><span style="color:#e6db74">               2 e 3 5 R 8 y u
</span><span style="color:#e6db74">               &lt; ! r ^ ( ) k 0&#39;</span>;
<span style="color:#66d9ef">my</span> $array   <span style="color:#f92672">=</span> make_array($message);

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">make_array</span> {
    <span style="color:#66d9ef">my</span>  ($message) <span style="color:#f92672">=</span> @_;
    <span style="color:#66d9ef">my</span>   @array;
    push @array, [ grep { length } split <span style="color:#e6db74">/\s+/</span>, $_ ] <span style="color:#66d9ef">for</span> split <span style="color:#e6db74">/\n/</span>, $message;
    <span style="color:#66d9ef">return</span> <span style="color:#f92672">\</span>@array;
}
</code></pre></div><p>Athanasius then loops to generate a full frequency distribution of letters for each column, then <code>sort</code>s them numerically to find the most frequent:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $decrypt <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $char (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $array<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-&gt;</span>$#<span style="color:#960050;background-color:#1e0010">*</span>) {
    <span style="color:#66d9ef">my</span> %opts;
     <span style="color:#f92672">++</span>$opts{ $array<span style="color:#f92672">-&gt;</span>[$_][$char] } <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#$array;
    $decrypt <span style="color:#f92672">.=</span> (sort { $opts{$b} <span style="color:#e6db74">&lt;=&gt;</span> $opts{$a} } keys %opts)[<span style="color:#ae81ff">0</span>];
}
</code></pre></div><h2 id="cheok-yin-fung1">Cheok-Yin Fung</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/cheok-yin-fung/perl/ch-1.pl">Cheok-Yin Fung&rsquo;s solution</a> handles the frequency analysis with an AoA which maps the column number <code>$j</code> and all ASCII ordinals from 33..126, to the number of times they appear:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$numberoflines<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $j (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$msglength<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
        <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $d (<span style="color:#ae81ff">33</span><span style="color:#f92672">..</span><span style="color:#ae81ff">126</span>) {
            $charoccurence[$j][$d] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e"># ref to the ASCII table; #33 is ! and #126 is ~</span>
        }
    }
}
</code></pre></div><p>(The row-based <code>$i</code> is not used, here.)</p>
<p>The message, a string, then has horizontal whitespace removed before being split into lines, and then characters. The innermost loop compares the current character to each of 33..126, and increments <code>$charoccurence[$j][$d]</code> if it matches:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># &#34; =~ s/\s//g &#34; isn&#39;t good becoz it removes new line characters</span>
$msg <span style="color:#f92672">=~</span> <span style="color:#e6db74">s/\h//g</span>;
<span style="color:#66d9ef">my</span> @lines <span style="color:#f92672">=</span> split(<span style="color:#e6db74">&#34;\n&#34;</span>, $msg);
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$numberoflines<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
    <span style="color:#66d9ef">my</span>  @str <span style="color:#f92672">=</span> split <span style="color:#e6db74">//</span> , $lines[$i];
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $j (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$msglength<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
        <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $d (<span style="color:#ae81ff">33</span><span style="color:#f92672">..</span><span style="color:#ae81ff">126</span>) {
            <span style="color:#66d9ef">if</span> (ord($str[$j]) <span style="color:#f92672">==</span> $d) {
            <span style="color:#75715e">#             if ( $str[$j] eq chr($d)) {</span>
            <span style="color:#75715e">#     print chr($d);             #testing</span>
                 $charoccurence[$j][$d]<span style="color:#f92672">++</span>;
             }
        }
    }
}
</code></pre></div><p>Cheok-Yin Fung could have replaced the inner <code>for my $d</code> loop with a single statement:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$charoccurence[$j][ ord( $str[$j] ) ]<span style="color:#f92672">++</span>;
</code></pre></div><p>If range checking the ordinal is a concern, a simple conditional would suffice, but I would personally rather validate or filter the input instead, in that case.</p>
<h2 id="cristian-heredia1">Cristina Heredia</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/cristian-heredia/perl/ch-1.pl">Cristina Heredia&rsquo;s solution</a> defines an array for each row:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @array1 <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;P&#39;</span>,  <span style="color:#e6db74">&#39;+&#39;</span>,  <span style="color:#e6db74">&#39;2&#39;</span>,  <span style="color:#e6db74">&#39;l&#39;</span>,  <span style="color:#e6db74">&#39;!&#39;</span>,  <span style="color:#e6db74">&#39;a&#39;</span>,  <span style="color:#e6db74">&#39;t&#39;</span>,  <span style="color:#e6db74">&#39;o&#39;</span> );
<span style="color:#66d9ef">my</span> @array2 <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;1&#39;</span>,  <span style="color:#e6db74">&#39;e&#39;</span>,  <span style="color:#e6db74">&#39;8&#39;</span>,  <span style="color:#e6db74">&#39;0&#39;</span>,  <span style="color:#e6db74">&#39;R&#39;</span>,  <span style="color:#e6db74">&#39;$&#39;</span>,  <span style="color:#e6db74">&#39;4&#39;</span>,  <span style="color:#e6db74">&#39;u&#39;</span> );
<span style="color:#66d9ef">my</span> @array3 <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;5&#39;</span>,  <span style="color:#e6db74">&#39;-&#39;</span>,  <span style="color:#e6db74">&#39;r&#39;</span>,  <span style="color:#e6db74">&#39;]&#39;</span>,  <span style="color:#e6db74">&#39;+&#39;</span>,  <span style="color:#e6db74">&#39;a&#39;</span>,  <span style="color:#e6db74">&#39;&gt;&#39;</span>,  <span style="color:#e6db74">&#39;/&#39;</span> );
<span style="color:#66d9ef">my</span> @array4 <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;P&#39;</span>,  <span style="color:#e6db74">&#39;x&#39;</span>,  <span style="color:#e6db74">&#39;w&#39;</span>,  <span style="color:#e6db74">&#39;l&#39;</span>,  <span style="color:#e6db74">&#39;b&#39;</span>,  <span style="color:#e6db74">&#39;3&#39;</span>,  <span style="color:#e6db74">&#39;k&#39;</span>,  <span style="color:#e6db74">&#39;\\&#39;</span> );
<span style="color:#66d9ef">my</span> @array5 <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;2&#39;</span>,  <span style="color:#e6db74">&#39;e&#39;</span>,  <span style="color:#e6db74">&#39;3&#39;</span>,  <span style="color:#e6db74">&#39;5&#39;</span>,  <span style="color:#e6db74">&#39;R&#39;</span>,  <span style="color:#e6db74">&#39;8&#39;</span>,  <span style="color:#e6db74">&#39;y&#39;</span>,  <span style="color:#e6db74">&#39;u&#39;</span> );
<span style="color:#66d9ef">my</span> @array6 <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;&lt;&#39;</span>,  <span style="color:#e6db74">&#39;!&#39;</span>,  <span style="color:#e6db74">&#39;r&#39;</span>,  <span style="color:#e6db74">&#39;^&#39;</span>,  <span style="color:#e6db74">&#39;(&#39;</span>,  <span style="color:#e6db74">&#39;)&#39;</span>,  <span style="color:#e6db74">&#39;k&#39;</span>,  <span style="color:#e6db74">&#39;0&#39;</span> );
</code></pre></div><p>This is then combined into the linear <code>@arrayCharacter</code> by appending the <code>$i</code>th character from each <code>@array?</code>, in a loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @arrayCharacter;
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;The message is: &#34;</span>;
<span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> @array1; $i<span style="color:#f92672">++</span>) {
    @arrayCharacter <span style="color:#f92672">=</span> ();
    push(@arrayCharacter, @array1[$i]);
    push(@arrayCharacter, @array2[$i]);
    push(@arrayCharacter, @array3[$i]);
    push(@arrayCharacter, @array4[$i]);
    push(@arrayCharacter, @array5[$i]);
    push(@arrayCharacter, @array6[$i]);
</code></pre></div><p>After that, Cristina loops through <code>@arrayCharacter</code> and <code>%count</code>s the frequency of each character, and then removes all pairs where the count is 1, effectively leaving the correct character for the column:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">    <span style="color:#66d9ef">my</span> %count;
    $count{$_}<span style="color:#f92672">++</span> <span style="color:#66d9ef">foreach</span> @arrayCharacter;
    <span style="color:#75715e">#removing the lonely strings</span>
    <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">my</span> ($key, $value) <span style="color:#f92672">=</span> each(%count)) {
        <span style="color:#66d9ef">if</span> ($value <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>) {
            delete($count{$key});
        }
    }

    <span style="color:#75715e">#output the counts</span>
    <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">my</span> ($key, $value) <span style="color:#f92672">=</span> each(%count)) {
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$key&#34;</span>;
    }
}
</code></pre></div><p>The step of creating <code>@arrayCharacter</code> could be avoided by replacing the <code>push(@arrayCharacter, @array1[$i])</code> lines with <code>$count{$array1[$i]}++</code>. I might also prefer using an AoA instead of the six named arrays, so that the code could handle messages with any number of rows. Apart from these suggestions, however, Cristina&rsquo;s algorithm is sound and the code is easy to follow.</p>
<h2 id="dave-jacoby1">Dave Jacoby</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/dave-jacoby/perl/ch-1.pl">Dave Jacoby&rsquo;s solution</a> accepts multi-line strings, and splits those into an AoA called <code>@ctext</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @ctext <span style="color:#f92672">=</span> map { [ split <span style="color:#e6db74">/\s+/</span>, $_ ] } grep { <span style="color:#e6db74">/\S/</span> } split <span style="color:#e6db74">m{\n}</span>, $ctext;
</code></pre></div><p>From there, he loops through the columns (<code>$i</code>) and increments <code>%col</code> for the corresponding character in each row. After that, he sorts the keys in reverse numerical order and takes the first one (<code>$k</code>):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> scalar $ctext[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-&gt;</span>@<span style="color:#960050;background-color:#1e0010">*</span> <span style="color:#960050;background-color:#1e0010">-</span> 1 ) {
    <span style="color:#66d9ef">my</span> %col;
    map { $col{ $_<span style="color:#f92672">-&gt;</span>[$i] }<span style="color:#f92672">++</span> } @ctext;
    <span style="color:#66d9ef">my</span> ($k) <span style="color:#f92672">=</span> sort { $col{$b} <span style="color:#e6db74">&lt;=&gt;</span> $col{$a} } keys %col;
    push @ptext, $k;
}
</code></pre></div><p>The final answer is then simply <code>join '', @ptext</code>.</p>
<h2 id="duane-powell1">Duane Powell</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/duane-powell/perl/ch-1.pl">Duane Powell&rsquo;s solution</a> takes the message as a string, splits it into lines, then characters, and increments a HoH (hash of hash) <code>$data</code> which maps a column <code>$p</code> and <code>$char</code> to its count:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $data <span style="color:#f92672">=</span> {};
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $line (split(<span style="color:#e6db74">/\n/</span>,$message)) {
    <span style="color:#66d9ef">my</span> $p <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $char (split(<span style="color:#e6db74">/ /</span>,$line)) {
        $data<span style="color:#f92672">-&gt;</span>{$p<span style="color:#f92672">++</span>}{$char}<span style="color:#f92672">++</span>;
    }
}
</code></pre></div><p>Now a simple nested loop iterates over the columns (<code>$p</code>), and finds the char that occurs most frequently within that column, and prints it:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $p (sort keys %{$data}) {
    <span style="color:#66d9ef">my</span> ($max,$out) <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;&#39;</span>);
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $char (keys %{$data<span style="color:#f92672">-&gt;</span>{$p}}) {
        <span style="color:#66d9ef">if</span> ($data<span style="color:#f92672">-&gt;</span>{$p}{$char} <span style="color:#f92672">&gt;</span> $max) {
            $out <span style="color:#f92672">=</span> $char;
            $max <span style="color:#f92672">=</span> $data<span style="color:#f92672">-&gt;</span>{$p}{$char};
        }
    }
    <span style="color:#66d9ef">print</span> $out;
}
</code></pre></div><p>Duane&rsquo;s solution is decently compact, and very comprehensible.</p>
<h2 id="duncan-c-white1">Duncan C. White</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/duncan-c-white/perl/ch-1.pl">Duncan C. White&rsquo;s solution</a> accepts a list of strings on the commandline. The solution is neatly divided into two parts. First up is the frequency collection, which builds up an AoH (array of hashes) in <code>@freq</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @freq;    <span style="color:#75715e"># array of bags</span>
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $msg (@ARGV) {
    <span style="color:#66d9ef">my</span> @letter <span style="color:#f92672">=</span> split(<span style="color:#e6db74"> //</span>, $msg );
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#letter) {
        $freq[$i] <span style="color:#e6db74">//</span><span style="color:#f92672">=</span> {};
        $freq[$i]{$letter[$i]}<span style="color:#f92672">++</span>;
    }
}
</code></pre></div><p>Each line is split into characters, and then Duncan loops through the resulting array, incrementing <code>$freq[$i]{_}</code> for each column and character.</p>
<p>Next up is the <code>$result</code> builder, which finds the character in each column with the maximum frequency:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $result <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#freq) {
    <span style="color:#66d9ef">my</span> $max <span style="color:#f92672">=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">my</span> $let <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
    <span style="color:#66d9ef">my</span> $href <span style="color:#f92672">=</span> $freq[$i];
    <span style="color:#66d9ef">while</span>( <span style="color:#66d9ef">my</span>($l,$f) <span style="color:#f92672">=</span> each %$href ) {
        <span style="color:#66d9ef">if</span>( $f <span style="color:#f92672">&gt;</span> $max ) {
            $max <span style="color:#f92672">=</span> $f;
            $let <span style="color:#f92672">=</span> $l;
        }
    }
    $result <span style="color:#f92672">.=</span> $let;
}
say $result;
</code></pre></div><h2 id="e-choroba1">E. Choroba</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/e-choroba/perl/ch-1.pl">E. Choroba&rsquo;s solution</a> works with arrays of strings (rows):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @message_sets <span style="color:#f92672">=</span> ([<span style="color:#e6db74">&#39;Hxl4!&#39;</span>, <span style="color:#e6db74">&#39;ce-lo&#39;</span>, <span style="color:#e6db74">&#39;ze6lg&#39;</span>, <span style="color:#e6db74">&#39;HWlvR&#39;</span>, <span style="color:#e6db74">&#39;q9m#o&#39;</span>],
                    [<span style="color:#e6db74">&#39;P+2l!ato&#39;</span>, <span style="color:#e6db74">&#39;1e80R$4u&#39;</span>, <span style="color:#e6db74">&#39;5-r]+a&gt;/&#39;</span>, <span style="color:#e6db74">&#39;Pxwlb3k\\&#39;</span>,
                     <span style="color:#e6db74">&#39;2e35R8yu&#39;</span>, <span style="color:#e6db74">&#39;&lt;!r^()k0&#39;</span>]);
</code></pre></div><p>Choroba&rsquo;s solution again uses an AoH to tally the frequency of each character in each column:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @frequency;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $message (@$messages) {
    <span style="color:#f92672">++</span>$frequency[$_]{ substr $message, $_, <span style="color:#ae81ff">1</span> }
        <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> length($message) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
}
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $position (@frequency) {
    <span style="color:#66d9ef">my</span> $max <span style="color:#f92672">=</span> max(values %$position);
    $position<span style="color:#f92672">-&gt;</span>{$_} <span style="color:#f92672">==</span> $max <span style="color:#f92672">and</span> <span style="color:#66d9ef">print</span> <span style="color:#66d9ef">for</span> keys %$position;
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><p><a href="https://perldoc.perl.org/List/Util.html"><code>List::Util</code></a>&lsquo;s <code>max</code> helps to find the most frequent character.</p>
<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/02/perl-weekly-challenge-046-cryptic-message-is-the-room-open.html">Cryptic Message &amp; Is the Room Open?</a></p>
<h2 id="jaldhar-h-vyas1">Jaldhar H. Vyas</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/jaldhar-h-vyas/perl/ch-1.pl">Jaldhar H. Vyas&rsquo; solution</a> accepts an AoA for input, and then starts with what amounts to a matrix transposition:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rotated;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> scalar @message <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $j (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> scalar @{$message[$i]} <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) {
        push @{$rotated[$j]}, $message[$i][$j];
    }
}
</code></pre></div><p>Now that the columns are rows, each row can be sorted to aid in finding
duplicated characters (whitespace mine):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say join <span style="color:#e6db74">q{}</span>,
     map { <span style="color:#e6db74">/(.)\1/</span>; $1; }
     map { join <span style="color:#e6db74">q{}</span>, sort @{$_}; } @rotated;
</code></pre></div><p>The sorted strings are then fed through the regexp <code>/(.)\1/</code> which is a capturing check for two of the same character in a row. <code>$1</code> is the character that was found.</p>
<p>Jaldhar&rsquo;s is a unique solution. Transposing the input makes the second part quite easy, using the highly optimized regexp engine to find the duplicated character.</p>
<h2 id="javier-luque1">Javier Luque</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/javier-luque/perl/ch-1.pl">Javier Luque&rsquo;s solution</a> takes a multiline string, splits it, and then builds up a column-wise array:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># Initialize the columns hash</span>
<span style="color:#66d9ef">my</span> @column_hash;
<span style="color:#66d9ef">my</span> ($first_line) <span style="color:#f92672">=</span> split (<span style="color:#e6db74">&#34;\n&#34;</span>, $message, <span style="color:#ae81ff">2</span>);
<span style="color:#66d9ef">my</span> $length <span style="color:#f92672">=</span> length(join <span style="color:#e6db74">&#39;&#39;</span>, split (<span style="color:#e6db74">&#34; &#34;</span>, $first_line));
$column_hash[$_] <span style="color:#f92672">=</span> {} <span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$length<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>);
<span style="color:#75715e"># Parse the cryptic message</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $line (split (<span style="color:#e6db74">&#34;\n&#34;</span>, $message)) {
    <span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $char (split (<span style="color:#e6db74">&#34; &#34;</span>, $line)) {
        $column_hash[$i<span style="color:#f92672">++</span>]<span style="color:#f92672">-&gt;</span>{$char}<span style="color:#f92672">++</span>;
    }
}
</code></pre></div><p>At this point, <code>@column_hash</code> contains character counts for each column. Next, Javier does a reverse numerical sort on each column, printing the first element, so that the most frequent characters are output.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># Sort</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $column (@column_hash) {
    <span style="color:#66d9ef">my</span> @sort <span style="color:#f92672">=</span>
        sort { $column<span style="color:#f92672">-&gt;</span>{$b} <span style="color:#e6db74">&lt;=&gt;</span> $column<span style="color:#f92672">-&gt;</span>{$a} }
        keys %$column;
    <span style="color:#66d9ef">print</span> $sort[<span style="color:#ae81ff">0</span>];
}
</code></pre></div><p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/02/04/perl-weekly-challenge-046/">046 – Perl Weekly Challenge</a></p>
<h2 id="laurent-rosenfeld1">Laurent Rosenfeld</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/laurent-rosenfeld/perl/ch-1.pl">Laurent Rosenfeld&rsquo;s solution</a> accepts a string, splits it into an AoA, and then transposes it to obtain a column-wise matrix:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @AoA <span style="color:#f92672">=</span> map { [ split <span style="color:#e6db74">/\s+/</span>, $_] } split <span style="color:#e6db74">/[\r\n]+/</span>, $garbled;
<span style="color:#66d9ef">my</span> @transposed;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#AoA) {
  $transposed[$_][$i] <span style="color:#f92672">=</span> $AoA[$i][$_] <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span> scalar @{$AoA[$i]} <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
}
</code></pre></div><p>From there, Laurent loops to build a frequency table for each column, in <code>%counter</code>, and appends all characters with a count greater than 1 to the output message:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @msg <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $line_ref (@transposed) {
    <span style="color:#66d9ef">my</span> %counter;
    $counter{$_}<span style="color:#f92672">++</span> <span style="color:#66d9ef">for</span> @$line_ref;
    push @msg, grep { $counter{$_} <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> } keys %counter;
}
say @msg;
</code></pre></div><p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-46-garbled-message-and-room-open.html">Garbled Message and Room Open</a></p>
<h2 id="mohammad-anwar1">Mohammad S Anwar</h2>
<p><strong>Mohammad,</strong> creator of the Perl Weekly Challenge, has finally entered the fray with a solution of his own! It may be a bit strange to welcome you to your own challenge, Mohammad, but I&rsquo;m going to do it anyway. Welcome. :-)</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/mohammad-anwar/perl/ch-1.pl">Mohammad S Anwar&rsquo;s solution</a> accepts an array of strings, and then splits each string on whitespace.  Maintaining a column counter, Mohammad increments the frequency table for each character in turn:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $table <span style="color:#f92672">=</span> <span style="color:#f92672">[]</span>;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $message (@messages) {
    <span style="color:#66d9ef">my</span> $column <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $char (split <span style="color:#e6db74">/\s/</span>, $message) {
        $table<span style="color:#f92672">-&gt;</span>[$column<span style="color:#f92672">++</span>]<span style="color:#f92672">-&gt;</span>{$char}<span style="color:#f92672">++</span>;
    }
}
</code></pre></div><p>Finally, all Mohammad needs to do is a reverse numerical sort on each column&rsquo;s frequency table, and print the key that appears most often.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">map { <span style="color:#66d9ef">print</span> [ sort { $_<span style="color:#f92672">-&gt;</span>{$b} <span style="color:#e6db74">&lt;=&gt;</span> $_<span style="color:#f92672">-&gt;</span>{$a} } keys %$_ ]<span style="color:#f92672">-&gt;</span>[<span style="color:#ae81ff">0</span>] } @$table;
</code></pre></div><p>Mohammad&rsquo;s solution is concise without getting in the way of comprehension.</p>
<h2 id="rage3111">Rage311</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/rage311/perl/ch-1.pl">Rage311&rsquo;s solution</a> starts with an AoA of the message, and then loops over it to build the frequency map:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @freq;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $col ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#{ $scrambled[<span style="color:#ae81ff">0</span>] } ) {
    $freq[$col]{ $scrambled[$_][$col] }<span style="color:#f92672">++</span> <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#scrambled;
}
</code></pre></div><p>Next, is the by now quite familiar max frequency loop to print the message:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say join <span style="color:#e6db74">&#39;&#39;</span>, map { (sort { $_<span style="color:#f92672">-&gt;</span>{$b} <span style="color:#e6db74">&lt;=&gt;</span> $_<span style="color:#f92672">-&gt;</span>{$a} } keys $_<span style="color:#f92672">-&gt;</span>%<span style="color:#960050;background-color:#1e0010">*</span>)[<span style="color:#ae81ff">0</span>] } @freq;
</code></pre></div><p>Rage311 took full advantage of the AoA input, here, without having to deal with the intermediate <code>split</code> and storage that other solutions needed to use.</p>
<h2 id="roger-bell-west1">Roger Bell West</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/roger-bell-west/perl/ch-1.pl">Roger Bell West&rsquo;s solution</a> takes input from STDIN, splitting each line on whiespace and adding it to the <code>@place</code> frequency map:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @place;
<span style="color:#66d9ef">while</span> (<span style="color:#f92672">&lt;&gt;</span>) {
    chomp;
    <span style="color:#66d9ef">my</span> @k<span style="color:#f92672">=</span>split <span style="color:#e6db74">/ /</span>,$_;
    map {$place[$_]{$k[$_]}<span style="color:#f92672">++</span>} (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#k);
}
</code></pre></div><p>Roger now loops through <code>@place</code>, one column at a time, printing the most frequent character:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $h (@place) {
    <span style="color:#66d9ef">my</span> @v<span style="color:#f92672">=</span>values %{$h};
    <span style="color:#66d9ef">my</span> @k<span style="color:#f92672">=</span>keys %{$h};
    <span style="color:#66d9ef">my</span> @i<span style="color:#f92672">=</span>sort {$v[$b] <span style="color:#e6db74">&lt;=&gt;</span> $v[$a]} (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#v);
    <span style="color:#66d9ef">print</span> $k[$i[<span style="color:#ae81ff">0</span>]];
}
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\n&#34;</span>;
</code></pre></div><h2 id="ruben-westerberg1">Ruben Westerberg</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ruben-westerberg/perl/ch-1.pl">Ruben Westerberg&rsquo;s solution</a> accepts an AoA in <code>@inComming</code> and loops through it column-wise to build a frequency table for each column in turn, and push each character to the resulting <code>@decoded</code> array:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @decoded;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $c (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>@{$inComming[<span style="color:#ae81ff">0</span>]}<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
    <span style="color:#66d9ef">my</span> @col;
    <span style="color:#66d9ef">my</span> %count;
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $r (@inComming) {
        <span style="color:#66d9ef">my</span> $v<span style="color:#f92672">=</span>$$r[$c];
        $count{$v}<span style="color:#f92672">++</span>;
        <span style="color:#66d9ef">if</span> ($count{$v}<span style="color:#f92672">==</span><span style="color:#ae81ff">2</span>) {
            push @decoded, $v;
            <span style="color:#66d9ef">last</span>;
        }
    }
}
<span style="color:#66d9ef">print</span> join <span style="color:#e6db74">&#34;&#34;</span>, @decoded;
</code></pre></div><h2 id="ryan-thompson1">Ryan Thompson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ryan-thompson/perl/ch-1.pl">My solution</a> uses a non-core (yet still extremely popular) module, <a href="https://metacpan.org/pod/List::MoreUtils"><code>List::MoreUtils</code></a> so I did not have to roll my own <code>frequency</code> method yet again. I also use core <code>List::Util</code>'s <code>reduce</code>. I accept a list of strings as input:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @r <span style="color:#f92672">=</span> map y<span style="color:#e6db74">/ /</span><span style="color:#f92672">/</span>dr, @_;
join <span style="color:#e6db74">&#39;&#39;</span>,   map { reduce { $_<span style="color:#f92672">-&gt;</span>{$a} <span style="color:#f92672">&gt;</span> $_<span style="color:#f92672">-&gt;</span>{$b} ? $a : $b } keys %$_ }
   reverse map { { frequency map chop, @r } } <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>length $r[<span style="color:#ae81ff">0</span>];
</code></pre></div><p>Reading from the bottom up, inside out, we loop once for each column, and the inner <code>map chop, @r</code> chops the last character off of each string in <code>@r</code>, and feeds them all to <code>frequency</code>. Here, <code>frequency(H c z H q)</code> would return <code>(H =&gt; 2, c =&gt; 1, q =&gt; 1, z =&gt; 1)</code>. The extra curly braces turn this into a hash ref. Since <code>chop</code> works from right to left, we must <code>reverse</code> the results.</p>
<p>Then, we <code>reduce</code> over the list of keys, pulling the key that has the maximum value, which is the most frequent character. Finally, we <code>join</code> together the results.</p>
<p><strong>Blog</strong> › <a href="http://www.ry.ca/2020/02/cryptic-message/">PWC 046 › Cryptic Message</a></p>
<h2 id="saiftynet1">Saif Ahmed</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/saiftynet/perl/ch-1.pl">Saif Ahmed&rsquo;s solution</a> provides a decoder, but also some other code that explores these messages in more detail.  Here&rsquo;s the decoder, which accepts an ref to an array of strings:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">collector</span>{
    <span style="color:#66d9ef">my</span> $messages<span style="color:#f92672">=</span>shift;                               <span style="color:#75715e"># the list ref of messages</span>
    <span style="color:#66d9ef">my</span> $result<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;                                    <span style="color:#75715e"># the result to return</span>
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $col (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span> length $$messages[<span style="color:#ae81ff">0</span>]){       <span style="color:#75715e"># for each poition</span>
        <span style="color:#66d9ef">my</span> %collection<span style="color:#f92672">=</span>();                            <span style="color:#75715e"># hash to store frequencies</span>
        <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $message (@$messages){
            <span style="color:#66d9ef">no</span> warnings;                              <span style="color:#75715e"># so that undef === 0</span>
            $collection{(split <span style="color:#e6db74">//</span>,$message)[$col]}<span style="color:#f92672">++</span>; <span style="color:#75715e"># increment count when found</span>
        }
</code></pre></div><p>As you can see, Saif stores the frequency map in <code>%collection</code>. He loops once for each <code>$col</code>umn, and then once for each line in <code>@messages</code>. He <code>split</code>s each message and pulls out the current column. There is some unnecessary splitting going on, but the impact is minor when the messages are short.</p>
<p>Next, Saif iterates through the <code>%collection</code> hash and finds the most common
character in each column, and appends that to <code>$result</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">        <span style="color:#66d9ef">my</span> $max<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; <span style="color:#66d9ef">my</span> $commonest<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;                  <span style="color:#75715e"># now search and find commonest</span>
        <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $char (keys %collection){
            <span style="color:#66d9ef">if</span> ($collection{$char} <span style="color:#f92672">&gt;</span> $max) {
                $max<span style="color:#f92672">=</span>$collection{$char};
                $commonest<span style="color:#f92672">=</span>$char;
            }
        }
        $result<span style="color:#f92672">.=</span>$commonest;                           <span style="color:#75715e"># add the commonenst char to our result</span>
    }
</code></pre></div><h3 id="extra-credit">Extra Credit</h3>
<p>Saif provided a couple of other routines. The first is a &ldquo;broken messager&rdquo;, which automates generating messages like the ones given in the challenge. You feed in a plaintext <code>$message</code>, and it munges the characters randomly:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">brokenMessager</span>{
    <span style="color:#66d9ef">my</span> $message<span style="color:#f92672">=</span>shift;
    <span style="color:#66d9ef">my</span> $brokenness<span style="color:#f92672">=</span><span style="color:#ae81ff">0.4</span>;                <span style="color:#75715e"># likelihood of mangling</span>
    <span style="color:#66d9ef">my</span> $allChars<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;                   <span style="color:#75715e"># a string of all printable chars</span>
    $allChars <span style="color:#f92672">.=</span> chr <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">255</span>;       <span style="color:#75715e"># First get all characters 0 to 255,</span>
    $allChars <span style="color:#f92672">=~</span><span style="color:#e6db74">s/[^!-~]//g</span>;           <span style="color:#75715e"># Then remove anything non printable</span>
    <span style="color:#66d9ef">my</span> $result<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $char (split <span style="color:#e6db74">//</span>,$message){    <span style="color:#75715e"># split $message and random replace</span>
        $result<span style="color:#f92672">.=</span>(rand()<span style="color:#f92672">&gt;</span>$brokenness)?(split <span style="color:#e6db74">//</span>,$allChars)[rand()<span style="color:#f92672">*</span>length $allChars]:$char;
    }
    <span style="color:#66d9ef">return</span> $result;
}
</code></pre></div><p>Finally, Saif attempted a method of turning these messages into a form of reliable transport, by sending &ldquo;broken&rdquo; messages repeatedly until the decoded results are the same as the previous iteration. Saif acknowledges it is not 100% accurate. However, this provides an interesting glimpse into the practical aspects of trying to do error correction on such badly degraded messages:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">tryUntilStable</span>{
    <span style="color:#66d9ef">my</span> $message<span style="color:#f92672">=</span>shift;
    <span style="color:#66d9ef">my</span> $tests<span style="color:#f92672">=[]</span>;
    <span style="color:#66d9ef">my</span> $result<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>; <span style="color:#66d9ef">my</span> $guess<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;A guess&#34;</span>;
    <span style="color:#66d9ef">while</span> ($result <span style="color:#f92672">ne</span> $guess){
        $result<span style="color:#f92672">=</span>$guess;
        <span style="color:#66d9ef">my</span> $messageReceived<span style="color:#f92672">=</span>brokenMessager($message);
        <span style="color:#66d9ef">print</span> $messageReceived,<span style="color:#e6db74">&#34;\n&#34;</span>;
        sleep <span style="color:#ae81ff">0.5</span>;
        push @$tests,$messageReceived;
        $guess<span style="color:#f92672">=</span>collector($tests);
    }
    <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;\nFinal result:- $result\n&#34;</span>
}
</code></pre></div><h2 id="ulrich-rieke1">Ulrich Rieke</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/perl/ch-1.pl">Ulrich Rieke&rsquo;s solution</a> takes a list of strings and iterates column-wise with the help of <code>substr</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $array <span style="color:#f92672">=</span> shift;
<span style="color:#66d9ef">my</span> $len   <span style="color:#f92672">=</span> length ${$array}[<span style="color:#ae81ff">0</span>];
<span style="color:#66d9ef">my</span> $decoded;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {
    <span style="color:#66d9ef">my</span> %letterfrequency;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $word ( @{$array} ) {
        $letterfrequency{ substr( $word, $i, <span style="color:#ae81ff">1</span> ) }<span style="color:#f92672">++</span>;
    }
    <span style="color:#66d9ef">my</span> @sorted <span style="color:#f92672">=</span> sort { $letterfrequency{$b} <span style="color:#e6db74">&lt;=&gt;</span> $letterfrequency{$a} }
      keys %letterfrequency;
    $decoded <span style="color:#f92672">.=</span> $sorted[<span style="color:#ae81ff">0</span>];
}
</code></pre></div><p>Since he is iterating column-wise, Ulrich can build up the letter frequency and then append the most common character to the result, without storing any sort of multi-dimensional matrix.</p>
<h3 id="c-and-haskell">C++ and Haskell</h3>
<p>Ulrich also submitted solutions in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/cpp/ch-1.cpp">C++</a> and <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/haskell/ch-1.hs">Haskell</a>.</p>
<h2 id="user-person1">User Person</h2>
<p><strong>User Person</strong> is new to the challenge. Welcome!</p>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/user-person/perl/ch-1.pl">User Person&rsquo;s solution</a> accepts a multi-line string as input, and then iterates over each character (including <code>\n</code>s) as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $message       <span style="color:#f92672">=</span> $_[<span style="color:#ae81ff">0</span>];
$message          <span style="color:#f92672">=~</span> <span style="color:#e6db74">s{ }{}g</span>;
<span style="color:#66d9ef">my</span> $decodedString <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;_&#39;</span> x index($message,<span style="color:#e6db74">&#34;\n&#34;</span>);
<span style="color:#66d9ef">my</span> @seen          <span style="color:#f92672">=</span> ();
<span style="color:#66d9ef">my</span> $col           <span style="color:#f92672">=</span>  <span style="color:#ae81ff">0</span>;
CHAR_LOOP:
<span style="color:#66d9ef">foreach</span> ( split <span style="color:#e6db74">//</span>, $message ) {
    <span style="color:#66d9ef">if</span> ( $_ <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;\n&#34;</span>) {
        $col <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">next</span> CHAR_LOOP;
    }
    substr($decodedString,$col,<span style="color:#ae81ff">1</span>,$_) <span style="color:#66d9ef">if</span> <span style="color:#f92672">++</span>$seen[$col]{$_} <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>;
    <span style="color:#f92672">++</span>$col;
}
</code></pre></div><p>They use 4-argument <code>substr</code> here, to directly replace the character in <code>$decodedString</code> with the most frequent character in the column.</p>
<h3 id="python">Python</h3>
<p>User Person also submitted a solution in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/user-person/python/ch-1.py">Python</a>.</p>
<h2 id="wanderdoc1">Wanderdoc</h2>
<p>Wanderdoc provided <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/wanderdoc/perl/ch-1.pl">two solutions</a>, one that works with arrays, and one that works with strings. Both accept a multi-line string as input; the names refer to the internal logic. Conveniently, these are named <code>arrays</code> and <code>strings</code>. Here is <code>arrays</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">arrays</span> {
     <span style="color:#66d9ef">my</span> @strings <span style="color:#f92672">=</span>  map [split(<span style="color:#e6db74">/\s/</span>, $_)], split(<span style="color:#e6db74">/\n/</span>, $message);
     <span style="color:#66d9ef">my</span> $max_idx <span style="color:#f92672">=</span> $#{$strings[<span style="color:#ae81ff">0</span>]};
     <span style="color:#66d9ef">my</span> @cols <span style="color:#f92672">=</span> map { <span style="color:#66d9ef">my</span> $idx <span style="color:#f92672">=</span> $_;
          <span style="color:#66d9ef">my</span> @slice <span style="color:#f92672">=</span> map $_<span style="color:#f92672">-&gt;</span>[$idx] <span style="color:#e6db74">//</span> <span style="color:#e6db74">&#39;&#39;</span>, @strings; [@slice];
          } <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $max_idx;
     <span style="color:#66d9ef">my</span> @doubles <span style="color:#f92672">=</span> map { <span style="color:#66d9ef">my</span> %seen; grep $seen{$_}<span style="color:#f92672">++</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, @$_;} @cols;
     <span style="color:#75715e"># print join(&#39;&#39;,@doubles), $/; # PerlRaku</span>
}
</code></pre></div><p>Here, Wanderdoc splits the message into an AoA, a matrix of characters.  Wanderdoc then iterates through the column indicies to build up the columns as an AoA in <code>@cols</code>. After that, <code>@doubles</code> is essentially the final result, created from any character seen more than once in a given column.</p>
<p>Now here is <code>strings</code>, the string-based solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">strings</span> {
    <span style="color:#66d9ef">my</span> @strings <span style="color:#f92672">=</span> map { tr<span style="color:#e6db74">/ //ds; $_; } split( /</span><span style="color:#f92672">\</span>n<span style="color:#f92672">/</span>, $message );
    <span style="color:#66d9ef">my</span> $len     <span style="color:#f92672">=</span> length( $strings[<span style="color:#ae81ff">0</span>] );
    <span style="color:#75715e"># BrowserUK: http://www.perlmonks.org/?node_id=1202721:</span>
    <span style="color:#66d9ef">my</span> $buf   <span style="color:#f92672">=</span> chr(<span style="color:#ae81ff">0</span>) x $len;
    <span style="color:#66d9ef">my</span> @cRefs <span style="color:#f92672">=</span> map <span style="color:#f92672">\</span>substr( $buf, $_, <span style="color:#ae81ff">1</span> ), <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">my</span> $txt;
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $idx ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $len <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ) {
        <span style="color:#66d9ef">my</span> ($letter) <span style="color:#f92672">=</span> <span style="color:#66d9ef">do</span> {
            <span style="color:#66d9ef">my</span> %seen;
            grep $seen{$_}<span style="color:#f92672">++</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>,
              map { substr( $buf, <span style="color:#ae81ff">0</span> ) <span style="color:#f92672">=</span> $_; ${ $cRefs[$idx] }; } @strings;
        };
        $txt <span style="color:#f92672">.=</span> $letter;
    }
}
</code></pre></div><p>Here, Wanderdoc uses a buffer, with each index referenced by <code>@cRefs</code>. Then, Wanderdoc loops over each column index, and then uses the LHS <code>substr</code> to overwrite <code>$buf</code> with the current row. The current letter is <code>${ $cRefs[$idx] }</code>. Then, the <code>grep $seen{$_}++ &gt; 0</code> will return characters seen more than once.</p>
<p>With the included benchmark, <code>strings</code> runs approximately 50% faster. This is because the <code>@cRefs</code> setup does the expensive indexing operation once, and then those refs can be re-used without paying that penalty again.</p>
<p>It&rsquo;s certainly an interesting way to exploit the language. Whether the 2-3 minutes I spent staring at this code is worth the 66 μs CPU time savings really depends on how many of these messages one expects to decode, I suppose. :-)</p>
<hr>
<hr>
<h1 id="task2">Task #2 - Is The Room Open? (500 Doors)</h1>
<p>Here is Mohammad&rsquo;s description:</p>
<p>There are 500 rooms in a hotel with 500 employees having keys to all the rooms. The first employee opened main entrance door of all the rooms. The second employee then closed the doors of room numbers 2,4,6,8,10 and so on to 500. The third employee then closed the door if it was opened or opened the door if it was closed of rooms 3,6,9,12,15 and so on to 500. Similarly the fourth employee did the same as the third but only room numbers 4,8,12,16 and so on to 500. This goes on until all employees has had a turn.</p>
<p>Write a script to find out all the rooms still open at the end.</p>
<hr>
<h2 id="types-of-solutions">Types of Solutions</h2>
<h3 id="1-nested-loops">1. Nested Loops</h3>
<p>Most people solved this with some form of a nested loop. The outer loop for each employee (<code>i</code>), and the inner loop corresponds to each <code>1/i</code> door that employee will toggle. This results in an efficiency of O(n × (1/1 + 1/2 + ⋯ + 1/n)) ≈ O(n × log n). For a problem size of n = 500, that&rsquo;s absolutely fine.  However, with a little bit of math, it&rsquo;s possible to simplify things even more:</p>
<h3 id="2-square-numbers">2. Square Numbers</h3>
<p>Many people noticed that the doors left open are the square numbers (1², 2²=4, 3²=9, etc.). Some decided to implement this pattern as an algorithm, resulting in trivial code with O(sqrt(n)) complexity.</p>
<p>The main difficulty behind using this method is demonstrating its correctness, yet several people managed to do just that, with explanations or informal proofs of why <em>only</em> perfect square numbered doors would be open.</p>
<p>Correctness proofs are an important topic in computer science, so I&rsquo;m glad to see some effort being put into it here!</p>
<hr>
<p>Of course, neither of these solutions is necessarily &ldquo;better&rdquo; in the context of this challenge. The square numbers solution (2) is the result of analysis and math, while the looping solution (1) is a better showcase of the language features and coding ability. Both skills are tremendously important, and I&rsquo;m quite sure everyone I&rsquo;m reviewing today is capable of either method; it&rsquo;s just a matter of what they decide to submit.</p>
<hr>
<h2 id="alicia-bielsa2">Alicia Bielsa</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/alicia-bielsa/perl/ch-2.pl">Alicia Bielsa&rsquo;s solution</a> does a nested loop to flip the doors, with a <code>flipStatus</code> routine to actually toggle a door:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $TOTAL <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">my</span> @aRooms <span style="color:#f92672">=</span>  (<span style="color:#ae81ff">0</span>) x $TOTAL;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $employee (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$TOTAL){
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $door ($employee<span style="color:#f92672">..</span>$TOTAL){
        <span style="color:#66d9ef">if</span> ($door % <span style="color:#960050;background-color:#1e0010">$</span>employee <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ){
            $aRooms[$door<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> flipStatus ($aRooms[$door<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]);
        }
    }
}

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flipStatus</span> {
    <span style="color:#66d9ef">my</span> $status <span style="color:#f92672">=</span> shift;
    <span style="color:#66d9ef">if</span> ($status){
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
}
</code></pre></div><p>Finally, a simple loop through <code>@aRooms</code> to print the &ldquo;open&rdquo; (value 1) rooms:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $room (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$#aRooms){
    <span style="color:#66d9ef">if</span> ($aRooms[$room]){
        $room <span style="color:#f92672">++</span>;
        <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;Room $room opened\n&#34;</span>;
    }
}
</code></pre></div><p>Note that Alicia&rsquo;s <code>@aRooms</code> is 500 elements long, meaning indicies 0..499.  The challenge, however, asks for rooms 1..500. Alicia simply increments <code>$room</code> so the correct number is printed.</p>
<h2 id="andrezgz2">Andrezgz</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/andrezgz/perl/ch-2.pl">Andrezgz&rsquo;s solution</a> loops, but instead of working with 1-based math, Andrezgz simply adds a dummy room #0 so the numbers line up:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) x MAX; <span style="color:#75715e"># all rooms are closed</span>
unshift @rooms, <span style="color:#ae81ff">0</span>;      <span style="color:#75715e"># add room &#34;0&#34; for simplicity</span>
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $e (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> MAX) {
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $r ($e <span style="color:#f92672">..</span> MAX) {
        $rooms[$r] <span style="color:#f92672">*=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">if</span> ($r % <span style="color:#960050;background-color:#1e0010">$</span>e <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>);
    }
}
<span style="color:#66d9ef">print</span> join <span style="color:#e6db74">&#39;,&#39;</span>, grep { $rooms[$_] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> } (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> MAX);;
</code></pre></div><p>Also of note is that instead of toggling between 1 and 0, Andrezgz multiplies by -1 so closed rooms are -1, and open rooms are 1.</p>
<h2 id="athanasius2">Athanasius</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/athanasius/perl/ch-2.pl">Athanasius&rsquo; solution</a> uses constants for <code>$CLOSED</code> and <code>$OPEN</code>, as well as the room count:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> Const::Fast;
const <span style="color:#66d9ef">my</span> $CLOSED <span style="color:#f92672">=&gt;</span>   <span style="color:#ae81ff">0</span>;
const <span style="color:#66d9ef">my</span> $OPEN   <span style="color:#f92672">=&gt;</span>   <span style="color:#ae81ff">1</span>;
const <span style="color:#66d9ef">my</span> $ROOMS  <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">500</span>;
</code></pre></div><p>The looping here is optimal, thanks to the C-style inner loop skipping in
<code>$employee</code> intervals:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> (<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>, ($CLOSED) x $ROOMS);
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $employee (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $ROOMS) {
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">my</span> $door <span style="color:#f92672">=</span> $employee; $door <span style="color:#f92672">&lt;=</span> $ROOMS; $door <span style="color:#f92672">+=</span> $employee) {
        $rooms[$door] <span style="color:#f92672">=</span> ($rooms[$door] <span style="color:#f92672">==</span> $CLOSED ? $OPEN : $CLOSED);
    }
}
</code></pre></div><p>Printing out the results is a simple loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @open <span style="color:#f92672">=</span> grep { $rooms[$_] <span style="color:#f92672">==</span> $OPEN } <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $#rooms;
printf <span style="color:#e6db74">&#34;There are %d rooms still open at the end (the square-numbered &#34;</span> <span style="color:#f92672">.</span>
       <span style="color:#e6db74">&#34;rooms):\n%s\n&#34;</span>, scalar @open,
        join <span style="color:#e6db74">&#39;, &#39;</span>, map { sprintf <span style="color:#e6db74">&#39;%3d&#39;</span>, $_ } @open;
</code></pre></div><h2 id="cheok-yin-fung2">Cheok-Yin Fung</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/cheok-yin-fung/perl/ch-2.pl">Cheok-Yin Fung&rsquo;s solution</a> also loops optimally, using a Perlish <code>for</code> loop and multiplying by the employee interval, <code>$i</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @doors;
<span style="color:#66d9ef">my</span> $labor;
$doors[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;true&#39;</span>; <span style="color:#75715e"># main entrance</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>) {
    $doors[$i] <span style="color:#f92672">=</span> undef;
}
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">250</span>) {
    $labor <span style="color:#f92672">=</span> int(<span style="color:#ae81ff">500</span><span style="color:#f92672">/</span>$i);
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $j (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$labor) {
        $doors[$i<span style="color:#f92672">*</span>$j] <span style="color:#f92672">=</span> <span style="color:#f92672">not</span>($doors[$i<span style="color:#f92672">*</span>$j]);
    }
}
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">251</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>) {
    $doors[$i] <span style="color:#f92672">=</span> <span style="color:#f92672">not</span>($doors[$i]);
}
</code></pre></div><p>Cheok-Yin Fung uses <code>not</code> to invert the truth value of each door.</p>
<h2 id="colin-crain2">Colin Crain</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/colin-crain/perl/ch-2.pl">Colin Crain&rsquo;s solution</a> uses a nested loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $SIZE <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">my</span> @hotel <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>) x $SIZE;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $emp (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$SIZE) {
    <span style="color:#66d9ef">my</span> @doors <span style="color:#f92672">=</span> map { $_ % <span style="color:#960050;background-color:#1e0010">$</span>emp <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> ? <span style="color:#ae81ff">1</span> : <span style="color:#ae81ff">0</span> } ( <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$SIZE );
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $idx ( <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$SIZE<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span> ) {
        $hotel[$idx] <span style="color:#f92672">=</span> $hotel[$idx] <span style="color:#f92672">^</span> $doors[$idx];
    }
}
</code></pre></div><p>Colin makes a <code>@doors</code> array for every employee, which is essentially a vector of truth values, which he applies like a mask over <code>@hotel</code> to toggle the doors for the current employee.</p>
<p>This is the first use of the bitwise exclusive-or (<code>^</code>) operator we&rsquo;ve seen, but it won&rsquo;t be the last. XORing a value with 1 is a common way to toggle a boolean value, especially in assembler and lower-level languages like C. However, it works just as well in Perl.</p>
<h2 id="cristian-heredia2">Cristina Heredia</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/cristian-heredia/perl/ch-2.pl">Cristina Heredia&rsquo;s solution</a> uses a nested loop as well:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e">#0 is closed</span>
<span style="color:#75715e">#1 is opened</span>
<span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $size; $i<span style="color:#f92672">++</span>) {
    @rooms[$i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
}
<span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">my</span> $j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $j <span style="color:#f92672">&lt;</span> $size; $j<span style="color:#f92672">++</span>) {
    <span style="color:#66d9ef">foreach</span> (<span style="color:#66d9ef">my</span> $k <span style="color:#f92672">=</span> $j; $k <span style="color:#f92672">&lt;</span> $size; $k <span style="color:#f92672">=</span> $j <span style="color:#f92672">+</span> $k <span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>) {
        <span style="color:#75715e">#If closed</span>
        <span style="color:#66d9ef">if</span> (@rooms[$k] <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
            @rooms[$k] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
        }
        <span style="color:#66d9ef">else</span> {
            @rooms[$k] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        }
    }
}
</code></pre></div><p>Cristina makes the optimization in the inner <code>foreach</code> loop to only look at every <code>$j</code>th door, so this is an efficient solution. The only thing I would change is using the <code>$</code> sigil to access individual elements, so <code>@rooms[$k]</code> would become <code>$rooms[$k]</code>.</p>
<h2 id="dave-jacoby2">Dave Jacoby</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/dave-jacoby/perl/ch-2.pl">Dave Jacoby&rsquo;s solution</a> uses a nested loop, as well as the 501-length array, so Dave can enjoy 1-based indicies:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @doors <span style="color:#f92672">=</span> map { <span style="color:#ae81ff">1</span> } <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $e ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) {
    map { $doors[$_] <span style="color:#f92672">=</span> <span style="color:#f92672">!</span>$doors[$_] }
      grep { <span style="color:#ae81ff">0</span> <span style="color:#f92672">==</span> $_ % <span style="color:#960050;background-color:#1e0010">$</span>e } <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>;
}
say join <span style="color:#e6db74">&#39; &#39;</span>, grep { $doors[$_] } <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>;
</code></pre></div><p>This is a nicely concise solution. Dave starts off by initializing all doors to be open and starting with employee #2, which saves one trip through the loop. After that, he uses <code>!</code> to toggle the individual doors.</p>
<h2 id="duane-powell2">Duane Powell</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/duane-powell/perl/ch-2.pl">Duane Powell&rsquo;s solution</a> uses nested loops, too:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @room;
$room[$_] <span style="color:#f92672">=</span> CLOSED <span style="color:#66d9ef">foreach</span>(<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> ROOM);
<span style="color:#75715e"># Toggle doors up to nth $EMPLOYEE</span>
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $employee (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $EMPLOYEE) {
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $room (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> ROOM) {
        <span style="color:#66d9ef">if</span> ( $room % <span style="color:#960050;background-color:#1e0010">$</span>employee <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
            $room[$room] <span style="color:#f92672">=</span> ($room[$room] <span style="color:#f92672">==</span> OPEN) ? CLOSED : OPEN;
        }
    }
}
</code></pre></div><p>However, what I find most interesting about Duane&rsquo;s solution is that while <code>ROOM</code> is always 500, the <code>$EMPLOYEE</code> variable is taken from the commandline, so it&rsquo;s possible to step through the solution, seeing the state of the doors after <code>$EMPLOYEE</code> employees have done their thing.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $EMPLOYEE <span style="color:#f92672">=</span> shift <span style="color:#f92672">||</span> <span style="color:#ae81ff">500</span>; <span style="color:#75715e"># pass in $EMPLOYEE if you want to step thru the solution</span>
<span style="color:#66d9ef">use</span> constant {
    ROOM     <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">500</span>,
    OPEN     <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">0</span>,
    CLOSED   <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>,
};
</code></pre></div><h2 id="duncan-c-white2">Duncan C. White</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/duncan-c-white/perl/ch-2.pl">Duncan C. White&rsquo;s solution</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># all rooms open initially [we don&#39;t use element 0]</span>
<span style="color:#66d9ef">my</span> @roomopen <span style="color:#f92672">=</span> ( <span style="color:#ae81ff">0</span>, (<span style="color:#ae81ff">1</span>) x $n );
say <span style="color:#e6db74">&#34;naive answer:&#34;</span>;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $empl (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span>$n) {
    <span style="color:#66d9ef">for</span>( <span style="color:#66d9ef">my</span> $room<span style="color:#f92672">=</span>$empl; $room<span style="color:#f92672">&lt;=</span>$n; $room<span style="color:#f92672">+=</span>$empl ) {
        $roomopen[$room] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">-</span>$roomopen[$room];
    }
}
<span style="color:#66d9ef">my</span> @open <span style="color:#f92672">=</span> grep { $roomopen[$_] } <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$n;
say join(<span style="color:#e6db74">&#39;,&#39;</span>, @open);
</code></pre></div><p>On seeing the results, Duncan then did some exploration to find out why only the perfect squares were output. He correctly realized that a door will be open if and only if the number of factors of the room number is odd, and wrote another solution to test that observation:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># ok, so a room no R is open at the end if the number of factors of R,</span>
<span style="color:#75715e"># including 1 and R, is ODD:</span>
say <span style="color:#e6db74">&#34;odd-factors answer:&#34;</span>;
<span style="color:#66d9ef">my</span> @sq;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $r (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$n) {
    <span style="color:#66d9ef">my</span> $odd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
    <span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span>$r) {
        $odd <span style="color:#f92672">=</span> <span style="color:#f92672">!</span> $odd <span style="color:#66d9ef">if</span> $r % <span style="color:#960050;background-color:#1e0010">$</span>i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
    }
    push @sq, $r <span style="color:#66d9ef">if</span> $odd;
}
say join(<span style="color:#e6db74">&#39;,&#39;</span>, @sq);
</code></pre></div><p>In conclusion, he poses the following question:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say <span style="color:#e6db74">&#34;but why are the squares the only numbers with an odd number of factors?&#34;</span>;
</code></pre></div><p>This tells me Duncan has basically cracked the problem. The short answer to that question is that factors always come in pairs, and perfect squares have an odd number of factors because one factor (the square root) is multiplied by itself, but it&rsquo;s only counted once.</p>
<h3 id="postscript">PostScript</h3>
<p>Duncan also submitted a solution in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/duncan-c-white/postscript/ch-2.ps">PostScript</a>.</p>
<p><a href="http://www.ry.ca/wp-content/uploads/2020/02/duncan-c-white-046-2.pdf">Here is the output</a> with <code>ps2pdf</code>. Note that <code>-sPAPERSIZE=a4</code> was needed to avoid clipping.</p>
<h2 id="e-choroba2">E. Choroba</h2>
<p>E. Choroba submitted <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/e-choroba/perl/">three solutions</a>. The first is a basic nested loop approach:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $MAX <span style="color:#f92672">=</span> <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">my</span> @doors <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>) x $MAX;  <span style="color:#75715e"># All closed.</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $employee (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $MAX <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>) {
    $doors[$_] <span style="color:#f92672">=</span> <span style="color:#f92672">!</span> $doors[$_]
        <span style="color:#66d9ef">for</span> grep <span style="color:#ae81ff">0</span> <span style="color:#f92672">==</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> $_) % <span style="color:#960050;background-color:#1e0010">(</span>1 <span style="color:#f92672">+</span> $employee), <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $MAX <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
}
say join <span style="color:#e6db74">&#39; &#39;</span>, map <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> $_, grep $doors[$_], <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $MAX;
</code></pre></div><p>He then simplified that with the same observation Duncan just had about doors with odd numbers of divisors:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say join <span style="color:#e6db74">&#39; &#39;</span>, grep {
    <span style="color:#66d9ef">my</span> $door <span style="color:#f92672">=</span> $_;
    <span style="color:#ae81ff">1</span> <span style="color:#f92672">==</span> (grep <span style="color:#ae81ff">0</span> <span style="color:#f92672">==</span> $door % <span style="color:#960050;background-color:#1e0010">$</span>_, <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>) % 2
} <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>;
</code></pre></div><p>And finally, Choroba observed the perfect square pattern in the output and coded that up:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say join <span style="color:#e6db74">&#39; &#39;</span>, map $_ <span style="color:#f92672">**</span> <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> sqrt <span style="color:#ae81ff">500</span>;
</code></pre></div><p>His blog also mentions a simple benchmark he did, showing the first solution took 6.5 seconds to run 200 times, the second took 5.4 seconds, and the third just 0.9 seconds.</p>
<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/02/perl-weekly-challenge-046-cryptic-message-is-the-room-open.html">Cryptic Message &amp; Is the Room Open?</a></p>
<h2 id="jaldhar-h-vyas2">Jaldhar H. Vyas</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/jaldhar-h-vyas/perl/ch-2.pl">Jaldhar H. Vyas&rsquo; solution</a> uses a nested loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>) x <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">my</span> $end <span style="color:#f92672">=</span> scalar @rooms <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $end) {
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $j (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $end) {
        <span style="color:#66d9ef">if</span> (($j <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) % <span style="color:#960050;background-color:#1e0010">($</span>i <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
            $rooms[$j] <span style="color:#f92672">=</span> ($rooms[$j]) ? <span style="color:#ae81ff">0</span> : <span style="color:#ae81ff">1</span>;
        }
    }
}
</code></pre></div><p>The <code>(($j + 1) % ($i + 1) == 0)</code> conditional translates <code>$i</code> and <code>$j</code> to 1-based numbering, and then only toggles the room if the room (<code>$j</code>) is a multiple of the employee number (<code>$i</code>).</p>
<h2 id="javier-luque2">Javier Luque</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/javier-luque/perl/ch-2.pl">Javier Luque&rsquo;s solution</a> is another nested loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @doors;
$doors[$_] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>);
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $employee (<span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>) {
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $door ($employee <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) {
        <span style="color:#66d9ef">next</span> <span style="color:#66d9ef">unless</span> $door % <span style="color:#960050;background-color:#1e0010">$</span>employee <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
        $doors[$door] <span style="color:#f92672">=</span> ($doors[$door]) ? <span style="color:#ae81ff">0</span> : <span style="color:#ae81ff">1</span>;
    }
}
</code></pre></div><p>Javier tests the divisibility in the inner loop to determine if the <code>$employee</code> should open the current <code>$door</code>.</p>
<p><strong>Blog</strong> › <a href="https://perlchallenges.wordpress.com/2020/02/04/perl-weekly-challenge-046/">046 – Perl Weekly Challenge</a></p>
<h2 id="laurent-rosenfeld2">Laurent Rosenfeld</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/laurent-rosenfeld/perl/ch-2.pl">Laurent Rosenfeld&rsquo;s solution</a> also uses nested loops, however Laurent uses a <code>while</code> inner loop and increments <code>$door</code> by <code>$start</code> (the employee number) for a more efficient solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> constant MAX <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">50</span>;
<span style="color:#75715e"># 1 =&gt; open, 0 =&gt; closed</span>
<span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>) x (MAX <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>); <span style="color:#75715e"># (first employee)</span>
<span style="color:#66d9ef">my</span> $start <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">for</span> (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span>MAX) {
    $start<span style="color:#f92672">++</span>;
    <span style="color:#66d9ef">my</span> $door <span style="color:#f92672">=</span> $start;
    <span style="color:#66d9ef">while</span> ($door <span style="color:#f92672">&lt;=</span> MAX) {
        $rooms[$door] <span style="color:#f92672">=</span> $rooms[$door] ? <span style="color:#ae81ff">0</span> : <span style="color:#ae81ff">1</span>;
        $door <span style="color:#f92672">+=</span> $start;
    }
}
say join <span style="color:#e6db74">&#34; &#34;</span>, @rooms[<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>MAX];
</code></pre></div><p>Laurent&rsquo;s blog has some interesting analysis on the results, which is definitely worth a read:</p>
<p><strong>Blog</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-46-garbled-message-and-room-open.html">Garbled Message and Room Open</a></p>
<h2 id="mohammad-anwar2">Mohammad S Anwar</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/mohammad-anwar/perl/ch-2.pl">Mohammad S Anwar&rsquo;s solution</a> similarly uses an inner <code>while</code> loop so he can increase <code>$room_number</code> by the <code>$employee</code> number for a significant efficiency advantage:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> map { <span style="color:#ae81ff">1</span> } (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>);
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $employee (<span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span>) {
    <span style="color:#66d9ef">my</span> $room_number <span style="color:#f92672">=</span> $employee;
    <span style="color:#66d9ef">while</span> ($room_number <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">500</span>) {
        $rooms[ $room_number ] <span style="color:#f92672">=</span> ($rooms [ $room_number ]) ? <span style="color:#ae81ff">0</span> : <span style="color:#ae81ff">1</span>;
        $room_number <span style="color:#f92672">+=</span> $employee;
    }
}
map { <span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34;$_\n&#34;</span> <span style="color:#66d9ef">if</span> $rooms[$_] } (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>);
</code></pre></div><h2 id="peter-scott">Peter Scott</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/peter-scott/perl/ch-2.sh">Peter Scott&rsquo;s solution</a> is a one-liner:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="color:#75715e">#!/bin/sh
</span><span style="color:#75715e"></span>perl -E <span style="color:#e6db74">&#39;$N=shift; @R=(0)x$N; for $e (1..$N){ for ($r = $e; $r &lt; $N; $r += $e ) { $R[$r-1] ^= 1 } } say for grep { $R[$_-1] } 1..$N&#39;</span> <span style="color:#ae81ff">500</span>
</code></pre></div><p><code>perltidy</code> sure does come in handy sometimes:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">$N <span style="color:#f92672">=</span> shift;
@R <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>) x $N;
<span style="color:#66d9ef">for</span> $e ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $N ) {
    <span style="color:#66d9ef">for</span> ( $r <span style="color:#f92672">=</span> $e ; $r <span style="color:#f92672">&lt;</span> $N ; $r <span style="color:#f92672">+=</span> $e ) {
        $R[ $r <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] <span style="color:#f92672">^=</span> <span style="color:#ae81ff">1</span>
    }
}
say <span style="color:#66d9ef">for</span> grep { $R[ $_ <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] } <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> $N
</code></pre></div><p>Peter uses a C-style <code>for</code> loop to check every <code>$e</code> doors, and also uses XOR (<code>^</code>) to toggle each door. He also maintains 0-based indexing throughout.</p>
<h2 id="rage3112">Rage311</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/rage311/perl/ch-2.pl">Rage311&rsquo;s solution</a> uses nested loops:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> (<span style="color:#ae81ff">0</span>) x <span style="color:#ae81ff">501</span>;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $emp ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) {
    <span style="color:#66d9ef">for</span> ( <span style="color:#66d9ef">my</span> $room <span style="color:#f92672">=</span> $emp ; $room <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">500</span> ; $room <span style="color:#f92672">+=</span> $emp ) {
        $rooms[$room] <span style="color:#f92672">^=</span> <span style="color:#ae81ff">1</span>;
    }
}
say <span style="color:#e6db74">&#39;Open: &#39;</span>, join <span style="color:#e6db74">&#39;,&#39;</span>, grep { $rooms[$_] } <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#rooms;
</code></pre></div><p>The by now familiar inner C-style <code>for</code> loop and XOR toggle are shown here.</p>
<h2 id="roger-bell-west2">Roger Bell West</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/roger-bell-west/perl/ch-2.pl">Roger Bell West&rsquo;s solution</a> is similarly loopy:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @rooms <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>) x <span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $n ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) {
    <span style="color:#66d9ef">for</span> ( <span style="color:#66d9ef">my</span> $k <span style="color:#f92672">=</span> $n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ; $k <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">500</span> ; $k <span style="color:#f92672">+=</span> $n ) {
        $rooms[$k] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> $rooms[$k];
    }
}
<span style="color:#66d9ef">print</span> map { $_ <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;\n&#34;</span> } grep { $rooms[$_] <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span> } ( <span style="color:#ae81ff">0</span> <span style="color:#f92672">..</span> $#rooms );
</code></pre></div><p>Toggling a boolean with <code>$rooms[$k] = 1 - $rooms[$k]</code> is an old trick I remember using with 808x assembly programming a long time ago. Somehow this challenge turned into a &ldquo;how many different ways can you toggle a boolean&rdquo; challenge!</p>
<h2 id="ruben-westerberg2">Ruben Westerberg</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ruben-westerberg/perl/ch-2.pl">Ruben Westerberg&rsquo;s solution</a> loops, with an inner <code>while</code> loop:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @doors<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>) x <span style="color:#ae81ff">500</span>;
$doors[$_]<span style="color:#f92672">=</span> $doors[$_]?<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">..</span><span style="color:#ae81ff">499</span>;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i (<span style="color:#ae81ff">2</span><span style="color:#f92672">..</span><span style="color:#ae81ff">500</span>) {
    <span style="color:#66d9ef">my</span> $j<span style="color:#f92672">=</span>$i;
    <span style="color:#66d9ef">while</span> ($j <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">500</span>) {
        $doors[$j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]<span style="color:#f92672">=</span>$doors[$j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]?<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">1</span>;
        $j<span style="color:#f92672">+=</span>$i;
    }
}
<span style="color:#66d9ef">print</span> @doors;
</code></pre></div><p><code>print @doors</code> outputs a string of 500 1s and 0s, providing a more visual depiction of which doors are open and closed.</p>
<h2 id="ryan-thompson2">Ryan Thompson</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ryan-thompson/perl/ch-2.pl">My solution</a> comes in two parts. First, simply printing the square numbers:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">say join <span style="color:#e6db74">&#39; &#39;</span>, map { $_ <span style="color:#f92672">*</span> $_ } <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>int sqrt $doors;
</code></pre></div><p>Since the correctness of this method is perhaps not obvious, I also provide an informal correctness proof at the end of <a href="http://www.ry.ca/2020/02/500-doors/">my blog post</a>.</p>
<p>I also did a looping solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> %door;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $m (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$doors) {
    $door{$m<span style="color:#f92672">*</span>$_} <span style="color:#f92672">^=</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">for</span> <span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$doors<span style="color:#f92672">/</span>$m;
}
</code></pre></div><p><strong>Blog</strong> › <a href="http://www.ry.ca/2020/02/500-doors/">PWC 046 › Is the Room Open? (500 Doors)</a></p>
<h2 id="saiftynet2">Saif Ahmed</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/saiftynet/perl/ch-2.pl">Saif Ahmed&rsquo;s solution</a> is also a two-parter. First, a looping solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> $doorCount<span style="color:#f92672">=</span><span style="color:#ae81ff">500</span>;
<span style="color:#66d9ef">my</span> @doors<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>)x($doorCount<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>);          <span style="color:#75715e"># $doorCount+1 doors</span>
<span style="color:#66d9ef">foreach</span> <span style="color:#66d9ef">my</span> $doorman (<span style="color:#ae81ff">1</span><span style="color:#f92672">..</span>$#doors) {     <span style="color:#75715e"># each of the employees</span>
    <span style="color:#66d9ef">my</span> $n<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;                           <span style="color:#75715e"># multiples starting with one</span>
    <span style="color:#66d9ef">while</span> ($doorman<span style="color:#f92672">*</span>$n<span style="color:#f92672">&lt;=</span>($doorCount)){ <span style="color:#75715e"># and continuing until no more doors</span>
                                       <span style="color:#75715e"># toggles the door state (using &#39;not&#39;)</span>
      $doors[$doorman<span style="color:#f92672">*</span>$n<span style="color:#f92672">++</span>]<span style="color:#f92672">=</span><span style="color:#f92672">not</span> $doors[$doorman<span style="color:#f92672">*</span>$n];
    }
}
</code></pre></div><p>And then, Saif notices the square number pattern, providing the following brief justification and solution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#75715e"># The results are interesting. The door will only stay open if it has an</span>
<span style="color:#75715e"># odd number of factors. Factors of a number generally occur as pairs</span>
<span style="color:#75715e"># that multiply together to produce that number...so the only way to get a</span>
<span style="color:#75715e"># odd number of factors is when it possible for both the factors to be</span>
<span style="color:#75715e"># the same...i.e the number has to be a square number.</span>
<span style="color:#75715e"># the same results can therefore be obtained by:</span>
<span style="color:#66d9ef">my</span> $cheat<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
<span style="color:#66d9ef">print</span> <span style="color:#e6db74">&#34; &#34;</span><span style="color:#f92672">.</span>($cheat<span style="color:#f92672">++</span>)<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">while</span> $cheat<span style="color:#f92672">&lt;</span>sqrt($doorCount);
</code></pre></div><h2 id="ulrich-rieke2">Ulrich Rieke</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/perl/ch-2.pl">Ulrich Rieke&rsquo;s solution</a> uses anonymous arrays to store the door number with its <code>open</code> or <code>closed</code> status:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @doors;
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) {
    push( @doors, [ $i, <span style="color:#e6db74">&#34;open&#34;</span> ] );
}
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $i ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> <span style="color:#ae81ff">500</span> ) {
    <span style="color:#66d9ef">if</span> ( $i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">251</span> ) {
        <span style="color:#66d9ef">for</span> ( <span style="color:#66d9ef">my</span> $j <span style="color:#f92672">=</span> $i ; $j <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">500</span> ; $j <span style="color:#f92672">+=</span> $i ) {
            ${ $doors[ $j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] }[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> flip( ${ $doors[ $j <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] }[<span style="color:#ae81ff">1</span>] );
        }
    }
    <span style="color:#66d9ef">else</span> {
        ${ $doors[ $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] }[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> flip( ${ $doors[ $i <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> ] }[<span style="color:#ae81ff">1</span>] );
    }
}
</code></pre></div><p>The conditional <code>if ( $i &lt; 251 )</code> is unnecessary here. I believe Ulrich has recognized that employees 251..500 will only have to toggle a single door, so he made a special case for that, as an optimization. However, since he already has a C-style for loop that increments by <code>$i</code> every time, the special case can be removed. However, the inner loop&rsquo;s conditional must then read <code>$j &lt;= 500</code>, so that door 500 is correctly toggled.</p>
<p>Ulrich also factored the door toggle to its own routine, <code>flip()</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">flip</span> {
    <span style="color:#66d9ef">my</span> $state <span style="color:#f92672">=</span> shift;
    <span style="color:#66d9ef">if</span> ( $state <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;open&#34;</span> ) {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;closed&#34;</span>;
    }
    <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#34;open&#34;</span>;
    }
}
</code></pre></div><h3 id="c-and-haskell-1">C++ and Haskell</h3>
<p>Ulrich also submitted solutions in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/cpp/ch-2.cpp">C++</a> and <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/ulrich-rieke/haskell/ch-2.hs">Haskell</a>.</p>
<h2 id="user-person2">User Person</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/user-person/perl/ch-2.pl">User Person&rsquo;s solution</a> also has its own toggle routine:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">change</span> {
    <span style="color:#66d9ef">return</span> $_[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">eq</span> <span style="color:#e6db74">&#34;OPENED&#34;</span> ? <span style="color:#e6db74">&#34;CLOSED&#34;</span> : <span style="color:#e6db74">&#34;OPENED&#34;</span>;
}
</code></pre></div><p>(Note again the use of string identifiers, removing any ambiguity about whether 0 or 1 means open.) The main nested loop is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">push @doors, <span style="color:#e6db74">&#34;CLOSED&#34;</span> <span style="color:#66d9ef">foreach</span> (<span style="color:#ae81ff">0</span><span style="color:#f92672">..</span>$MAX);
ROOM:
<span style="color:#66d9ef">for</span> ( <span style="color:#66d9ef">my</span> $i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;=</span> $MAX; <span style="color:#f92672">++</span>$i ) {
    <span style="color:#66d9ef">if</span> ($i <span style="color:#f92672">&gt;</span> $MAX <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span> ) {
       $doors[$i] <span style="color:#f92672">=</span>  change $doors[$i];
       <span style="color:#66d9ef">next</span> ROOM;
   }
   <span style="color:#66d9ef">for</span> ( <span style="color:#66d9ef">my</span> $j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $j <span style="color:#f92672">&lt;=</span> $MAX; <span style="color:#f92672">++</span>$j ) {
       <span style="color:#66d9ef">if</span> ($j % <span style="color:#960050;background-color:#1e0010">$</span>i <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
           $doors[$j] <span style="color:#f92672">=</span>  change $doors[$j];
       }
   }
}
</code></pre></div><p>User Person also has a conditional to save some looping for employees 251..500, but it does provide some savings in this case, because their inner loop (<code>$j</code>) increments by 1, instead of by the employee number.</p>
<h3 id="bash-and-python">Bash and Python</h3>
<p>User Person also submitted solutions in <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/user-person/bash/ch-2.bash">Bash</a> and <a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/user-person/python/ch-2.py">Python</a>.</p>
<h2 id="wanderdoc2">Wanderdoc</h2>
<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-046/wanderdoc/perl/ch-2.pl">Wanderdoc&rsquo;s solution</a> does a deep dive into the performance of the nested loop method versus a more analytical method using factors. But before we get into that, I want to highlight Wanderdoc&rsquo;s refreshingly creative way to avoid 0-based indicies:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl">unshift @hotel, <span style="color:#e6db74">&#39;Lobby&#39;</span>; <span style="color:#75715e"># to make the array indices equal to room numbers.</span>
</code></pre></div><p>Here is the looping method:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">use</span> constant {NUM <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">500</span>, OPEN <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">1</span>, SWITCH <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>};
<span style="color:#66d9ef">my</span> @hotel <span style="color:#f92672">=</span> (OPEN) x NUM;
unshift @hotel, <span style="color:#e6db74">&#39;Lobby&#39;</span>;    <span style="color:#75715e"># to make the array indices equal to room numbers.</span>
<span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $emp ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> NUM ) {
    @hotel[ grep $_ % <span style="color:#960050;background-color:#1e0010">$</span>emp <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>, $emp <span style="color:#f92672">..</span> NUM ] <span style="color:#f92672">=</span>
      map $_ <span style="color:#f92672">*</span> SWITCH, @hotel[ grep $_ % <span style="color:#960050;background-color:#1e0010">$</span>emp <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>, $emp <span style="color:#f92672">..</span> NUM ];
}
<span style="color:#66d9ef">my</span> @open <span style="color:#f92672">=</span> grep $hotel[$_] <span style="color:#f92672">==</span> OPEN, <span style="color:#ae81ff">1</span> <span style="color:#f92672">..</span> NUM;
</code></pre></div><p>This is a fairly standard nested loop method, although you&rsquo;ll note the &ldquo;inner loop&rdquo; in this case is actually an array slice.</p>
<p>Wanderdoc&rsquo;s next method works by counting the unique factors for each door, and opens it if and only if the number of factors is even. (Noting, however, that they start checking for factors at 2, so 1 is not counted as a factor, here):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-perl" data-lang="perl"><span style="color:#66d9ef">my</span> @OPEN <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span>);
<span style="color:#66d9ef">for</span> ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> NUM ) { push @OPEN, $_ <span style="color:#66d9ef">if</span> ( is_open($_) ); }

<span style="color:#66d9ef">sub</span> <span style="color:#a6e22e">is_open</span> {
    <span style="color:#66d9ef">my</span> $n       <span style="color:#f92672">=</span> $_[<span style="color:#ae81ff">0</span>];
    <span style="color:#66d9ef">my</span> $counter <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">my</span> $k ( <span style="color:#ae81ff">2</span> <span style="color:#f92672">..</span> $n ) {
        <span style="color:#ae81ff">0</span> <span style="color:#f92672">==</span> $n % <span style="color:#960050;background-color:#1e0010">$</span>k <span style="color:#f92672">and</span> $counter<span style="color:#f92672">++</span>;
    }
    <span style="color:#66d9ef">return</span> $n <span style="color:#66d9ef">if</span> $counter % 2 <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;
}
<span style="color:#66d9ef">print</span> join(<span style="color:#e6db74">&#34; &#34;</span>, @OPEN), $/;
</code></pre></div><hr>
<hr>
<h2 id="blogs">See Also</h2>
<h3 id="blogs-this-week">Blogs this week:</h3>
<p><strong>Laurent Rosenfeld</strong> › <a href="http://blogs.perl.org/users/laurent_r/2020/02/perl-weekly-challenge-46-garbled-message-and-room-open.html">Garbled Message and Room Open</a></p>
<p><strong>Arne Sommer</strong> › <a href="https://raku-musings.com/cryptic-room.html">The Cryptic Raku Room</a></p>
<p><strong>Javier Luque</strong> › <a href="https://perlchallenges.wordpress.com/2020/02/04/perl-weekly-challenge-046/">046 – Perl Weekly Challenge</a></p>
<p><strong>E. Choroba</strong> › <a href="http://blogs.perl.org/users/e_choroba/2020/02/perl-weekly-challenge-046-cryptic-message-is-the-room-open.html">Cryptic Message &amp; Is the Room Open?</a></p>
<p><strong>Ryan Thompson</strong> › <a href="http://www.ry.ca/2020/02/cryptic-message/">Cryptic Message</a> | <a href="http://www.ry.ca/2020/02/500-doors/">Is the Room Open? (500 Doors)</a></p>
<p><strong>Luca Ferrari</strong> › <a href="https://fluca1978.github.io/2020/02/03/PerlWeeklyChallened_46.html">Encoded messages and open rooms</a></p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        2020
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" rel="noreferrer" rel="noreferrer" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" rel="noreferrer" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" rel="noreferrer" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.min.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/pwc-challenge.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/gc-challenge.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

