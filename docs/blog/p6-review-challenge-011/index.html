<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- Basic Page Needs -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title"       content="The Weekly Challenge - Perl & Raku"/>
    <meta property="og:type"        content="website"/>
    <meta property="og:url"         content="https://perlweeklychallenge.org/"/>
    <meta property="og:image"       content="https://perlweeklychallenge.org/images/about/about.jpg"/>
    <meta property="og:description" content="You do not have to be an expert."/>
    <meta name="twitter:card"       content="summary" />
    <meta name="twitter:image"      content="https://perlweeklychallenge.org/images/about/about.jpg"/>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <meta name="description" content="Laurent Rosenfeld Weekly Review: Challenge - #011.">
    <meta name="author" content="Perl Weekly Challenge Team">
    <meta name="generator" content="Hugo 0.55.0-DEV" />

    <!-- Mobile Specific Metas -->
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Laurent Rosenfeld Weekly Review: Challenge - 011</title>
    <link rel="icon" href="https://perlweeklychallenge.org/images/favicon.ico">

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css"/>

    <!-- Twitter Bootstrs CSS -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.css">
    <!-- Ionicons Fonts Css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/ionicons/ionicons.min.css">
    <!-- animate css -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/animate-css/animate.css">
    <!-- Hero area slider css-->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slider/slider.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/slick/slick.css">
    <!-- Fancybox -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.css">
    <!-- hover -->
    <link rel="stylesheet" href="https://perlweeklychallenge.org/plugins/hover/hover-min.css">
    <!-- template main css file -->
    
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/style.min.css" integrity="" media="screen">
    <link rel="stylesheet" href="https://perlweeklychallenge.org/css/main.css">
</head>

<body>

<section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="https://perlweeklychallenge.org/">
                        <img src="https://perlweeklychallenge.org/images/logo.svg" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navgation" aria-controls="navigation"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/about">About</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/chart">Chart</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/champions">Champions</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/team">Team</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/challenges">Challenges</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p5-reviews">Perl/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/p6-reviews">Raku/Review</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/recaps">Recaps</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/blogs">Blogs</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/faq">FAQ</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="https://perlweeklychallenge.org/contact">Contact</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>


<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Laurent Rosenfeld Weekly Review: Challenge - 011</h2>
                    <div class="portfolio-meta">
                        <span>Sunday, Nov 17, 2019</span>|
                        <span> Tags:
                            Raku
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="single-post">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <div style="text-align: center" class="post-img">
                    <img class="img-fluid" alt="" src="https://perlweeklychallenge.org/images/blog/p6-review-challenge-011.jpg">
                </div>
                
                <div style="text-align: justify" class="post-content">
                    

<hr />

<h1 id="raku-solutions-weekly-review">Raku Solutions Weekly Review</h1>

<hr />

<h2 id="task-2-displaying-the-identity-matrix">Task #2: Displaying the Identity Matrix</h2>

<p>This is derived in part from my <a href="http://blogs.perl.org/users/laurent_r/2019/06/perl-weekly-challenge-11-fahrenheit-celsius-and-identity-matrix.html">blog post</a> made in answer to the <a href="https://perlweeklychallenge.org/blog/perl-weekly-challenge-011/">Week 11 of the Perl Weekly Challenge</a> organized by  <a href="http://blogs.perl.org/users/mohammad_s_anwar/">Mohammad S. Anwar</a> as well as answers made by others to the same challenge.</p>

<p>The challenge reads as follows:</p>

<p><em>Write a script to create an Identity Matrix for the given size. For example, if the size is 4, then create Identity Matrix 4x4. For more information about Identity Matrix, please read the <a href="https://en.wikipedia.org/wiki/Identity_matrix">Wikipedia page</a>.</em></p>

<p>An identity matrix is a square matrix with ones on the main diagonal (top left to bottom right) and zeros everywhere else.</p>

<h2 id="my-solutions">My Solutions</h2>

<p>Let&rsquo;s start with a boring plain-vanilla solution using two nested loops, as I would probably have to do in C, Pascal, Ada, or Java:</p>

<pre><code class="language-Perl6">use v6;

sub MAIN (Int $size where * &gt; 0) {
    my @matrix;
    $size--;
    for 0..$size -&gt; $i {
        for 0..$size -&gt; $j {
            @matrix[$i][$j] = $i == $j ?? 1 !! 0;
        }
    }
    say @matrix;
}
</code></pre>

<p>Here, we are using the MAIN subroutine to process the argument passed to the script (which, in this case, must be a strictly positive integer).</p>

<p>When the row index (<code>$i</code>) is equal to the column index (<code>$j</code>), we populate the item with a one. Otherwise, we set it to zero.</p>

<p>This works as expected, but it is a bit difficult to understand the printed output:</p>

<pre><code>[[1 0 0] [0 1 0] [0 0 1]]
</code></pre>

<p>In such cases, it is useful to write an additional subroutine that can display the result in a way that is easy to understand. This is what the <code>pretty-print</code> subroutine below does:</p>

<pre><code class="language-Perl6">use v6;

sub pretty-print (@matrix) {
    for @matrix -&gt; @rows {
        say join &quot; &quot;, @rows;
    }
}
sub MAIN (Int $size where * &gt; 0) {
    my @matrix;
    $size--;
    for 0..$size -&gt; $i {
        for 0..$size -&gt; $j {
            @matrix[$i][$j] = $i == $j ?? 1 !! 0;
        }
    }
    pretty-print @matrix;
}
</code></pre>

<p>The output now shows clearly an identity matrix:</p>

<pre><code>$ perl6 matrix.p6 5
1 0 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 0 1 0
0 0 0 0 1
</code></pre>

<p>If the user omits to pass a parameter (or passes an invalid one), a convenient usage line is printed to the screen:</p>

<pre><code>$ perl6 matrix.p6
Usage:
  matrix.p6 &lt;size&gt;
</code></pre>

<h3 id="identity-matrix-in-functional-programming">Identity Matrix in Functional Programming</h3>

<p>Using the techniques of functional programming can make our code simpler.</p>

<p>A functional implementation in Raku / Perl 6 may look like this:</p>

<pre><code class="language-Perl6">use v6;

sub prettify (@matrix) {
    return join &quot;\n&quot;, map { join &quot; &quot;, $_}, @matrix;
}
sub MAIN (Int $size where * &gt; 0) {
    my @matrix = map { my $i = $_; map { $i == $_ ?? 1 !! 0 }, 0..$size },  0..$size;
    say prettify @matrix;
}
</code></pre>

<p>Since we&rsquo;re aiming at doing functional programming, we have replaced the <code>pretty-print</code> subroutine by a pure function, <code>prettify</code>, with no side effect: it does not print anything, but only returns a printable formatted string, which the user may then decide to print (as we did here), or may possibly do something else, such as storing it into a file for future use.</p>

<p>Note that the populating the identity matrix takes only one code line. The rest is really for prettifying the result and printing it.</p>

<p>We could also use data pipelines with chained method invocations:</p>

<pre><code class="language-Perl6">sub prettify (@matrix) {
    @matrix.map({join(&quot; &quot;,$_)}).join(&quot;\n&quot;);
}
sub MAIN (Int $size where * &gt; 0) {
    say prettify (1..$size).map( -&gt; $i { (1..$size).map( { $_ == $i ?? 1 !! 0 })});
}
</code></pre>

<p>although I&rsquo;m not really convinced this is any better in this specific case, as it is a bit tedious to get these pesky closing parentheses and curlies right.</p>

<h2 id="alternative-solutions">Alternative Solutions</h2>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/arne-sommer/perl6/ch-2c.p6">Arne Sommer</a> provided not less than four solutions. One of them uses the <a href="https://github.com/pierre-vigier/Perl6-Math-Matrix">Math::Matrix</a> module, whose <code>new-identity</code> method just creates an identity matrix out-of-the-box! My favorite solution, however,might probably be this quite concise one, which populates a matrix with zeros and then overwrites the zeros of the first diagonal with ones:</p>

<pre><code class="language-Perl6">unit sub MAIN (Int $size where $size &gt; 0);

my @im[$size;$size] = 0 xx $size xx $size;
@im[$_;$_] = 1 for ^$size;
say @im;
</code></pre>

<p>Note the use of <a href="https://docs.perl6.org/language/list#Fixed_size_arrays">shaped arrays</a> in Arne&rsquo;s solution above. Take the time to study Arne&rsquo;s <a href="https://github.com/manwar/perlweeklychallenge-club/tree/master/challenge-011/arne-sommer/perl6">other solutions</a> or read his blog post (see below).</p>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/feng-chang/perl6/ch-2.p6">Fench Chang</a> used the same strategy. His program populates a matrix with zeros and then overwrites the zeros of the first diagonal with ones:</p>

<pre><code class="language-Perl6">sub MAIN(Int $n where * &gt; 0) {
    my @a = [0 xx $n] xx $n;
    @a[$_][$_] = 1 for 0 .. $n - 1;
    @a.say;
}
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/joelle-maslak/perl6/ch-2.p6">Joelle Maslak</a> also used the same strategy, although in a different manner, i.e. doing it row by row:</p>

<pre><code class="language-Perl6">sub MAIN(UInt:D $size where * â‰¥ 1) {
    for ^$size -&gt; $row {
        my @row = (^$size).map: { 0 };
        @row[$row] = 1;
        say @row.join(&quot; &quot;);
    }
}
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/fjwhittle/perl6/ch-2.p6">Francis J. Whittle</a> made a very imaginative solution. His program loops over the range (the matrix&rsquo;s dimension) and, for each position, check if the row and column are equal, and finally coerces the Boolean result of that comparison into an integer, thus yielding 1 when they are equal, and 0 otherwise. The matrix is created in just one code line:</p>

<pre><code class="language-Perl6">(^$n).map: -&gt; $i { (^$n).map: -&gt; $j { Int($j == $i) } };
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/jo-christian-oterhals/perl6/ch-2.p6">Jo-Christian Oterhals</a> also delivered a creative solution using an <code>&amp;idm</code> code block that uses a <code>gather ... take</code> construct and returns an array of arrays.</p>

<pre><code class="language-Perl6">my &amp;idm = -&gt; $size { gather for ^$size -&gt; $y { take map { Int($_ == $y) }, ^$size } };
.join(' ').say for idm(4); # 4... 2... 16... or whatever...
</code></pre>

<p>The second line of the code above provided pretty printing of the resulting matrix:</p>

<pre><code>1 0 0 0
0 1 0 0
0 0 1 0
0 0 0 1
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/ruben-westerberg/perl6/ch-2.p6">Ruben Westerberg</a>&rsquo;s solution is also quite creative. He created for each line an array consisting of one 1 and as many zeros are required by the matrix&rsquo;s dimension, and used the <a href="https://docs.perl6.org/routine/rotate">rotate</a> built-in function to place the 1 in its proper position. Here, populating the matrix and displaying it prettily take just one code line:</p>

<pre><code class="language-Perl6">my $s=@*ARGS[0]//10;
(([1,|(0 xx $s-1)].rotate: -$++)  xx $s).map: *.join(&quot; &quot;).say;
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/simon-proctor/perl6/ch-2.p6">Simon Proctor</a> also succeeded to populate and display prettily the matrix in just one code line:</p>

<pre><code class="language-Perl6">sub MAIN ( UInt \N where * &gt; 0 ) {
    (1..N).map( -&gt; $i { (1..N).map( -&gt; $j { $j == $i ?? 1 !! 0 }).join(&quot; &quot;) } ).join(&quot;\n&quot;).say;
}
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/jaldhar-h-vyas/perl6/ch-2.p6">Jaldhar H. Vyas</a> used a straight forward technique quite similar to my first solution, with two nested loops to populate the matrix&rsquo;s cells with 1 when the row and column indexes are equal and with zeros otherwise</p>

<pre><code class="language-Perl6">multi sub MAIN(
    Int $n where $n &gt; 1#= the size of the identity matrix
) {

    for (0 .. $n - 1) -&gt; $i {
        for (0 .. $n - 1) -&gt; $j {
            print ($j == $i) ?? '1 ' !! '0 ';
        }
        print &quot;\n&quot;;
    }
}
</code></pre>

<p><a href="https://github.com/manwar/perlweeklychallenge-club/blob/master/challenge-011/ozzy/perl6/ch-2.p6">Ozzy</a> used essentially the same strategy with two nested <code>for</code> loops:</p>

<pre><code class="language-Perl6">sub MAIN (Int $dim)
{
    my @md[$dim;$dim];

    for 0..$dim-1 -&gt; $i {
        for 0..$dim-1 -&gt; $j {
            @md[$i;$j]= $i==$j ?? 1 !! 0;
            printf &quot;%3i&quot;, @md[$i;$j];
        }
    printf &quot;\n&quot;;
    }
}
</code></pre>

<h2 id="see-also">SEE ALSO</h2>

<p>Only one blog this time (besides mine):</p>

<ul>
<li>Arne Sommer: <a href="https://perl6.eu/fc-matrix.html">https://perl6.eu/fc-matrix.html</a>.</li>
</ul>

<h2 id="wrapping-up">Wrapping up</h2>

<p>Please let me know if I forgot any of the challengers or if you think my explanation of your code misses something important (send me an e-mail or just raise an issue against this GitHub page).</p>

                </div>
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT DO YOU THINK ?</h2>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">If you have any suggestions or ideas then please do share with us.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->



<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        <script>document.write(new Date().getFullYear())</script>
                    </span> PerlWeeklyChallenge. Theme Design and Developed by
                    <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    <li>
                        <a href="https://twitter.com/PerlWChallenge" class="twitter" target="_blank" title="Follow us">
                            <i class="ion-social-twitter"></i>
                        </a>
                    </li>
                    <li>
                        <a href="/rss.xml" class="rss" target="_blank" title="RSS Feed">
                            <i class="ion-social-rss"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.nomtimes.co.uk/site/shop.do?cref=PerlBooks" title="Free Perl Books" target="_blank">
                            <img src="/images/NomTimes.jpg" style="width:22px; height: 18px;" alt=""/>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="https://perlweeklychallenge.org/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.form.js"></script>
<script src="https://perlweeklychallenge.org/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="https://perlweeklychallenge.org/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="https://perlweeklychallenge.org/plugins/bootstrap/bootstrap.min.js"></script>
<!-- chart js -->
<script src="https://perlweeklychallenge.org/plugins/chart/highstock.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/drilldown.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/data.js"></script>
<script src="https://perlweeklychallenge.org/plugins/chart/chart.js"></script>
<!-- wow js -->
<script src="https://perlweeklychallenge.org/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="https://perlweeklychallenge.org/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="https://perlweeklychallenge.org/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="https://perlweeklychallenge.org/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-136524905-1', 'auto');
    ga('send', 'pageview');
</script>
</body>

</html>

